`default_nettype none
`include "USB.svh"
`include "USBPkg.pkg"

//////
////// USB Serial Interface Engine 18-341
////// Device module
//////
module USBDevice #(parameter DEVICE_ADDR=`DEVICE_ADDR, DATA_ENDP=`DATA_ENDP,
                             ADDR_ENDP=`ADDR_ENDP) (
    USBWires wires,
    input logic clock, reset_n,
    output debug_pkt_t debug_pkt_ext);

  `protected
HRRR[48?76d5WZ=Q.LM.L9#Tb(,Y8^bE>OWW2_)U-HJ]L>3f,,0@/)P]+24AQ7D:
&OI9:)5-5U<dZN+52dK,<QP_c3+=-c#5:;6#,.(VX>EQV]3CY[-.6C-)e\/.g=f;
=V_8Pf^X3X>E4+,QbIZ\/_X6VK^EYD>9#HT&W<1@B@3E(g>GCgbf(6:4_ETBU>^K
A,0.^M.92Dg;;3M65f)1_d/3&OO8M930)-J&P9E.X1bbXNg6_3L51V,d4WC[;-XQ
f@.gQ2W.a[_-FdQd2(TQ^.-^e8W[5DUV]3J9/I>JN(8Y_YV,/49?N<?Ka/UPB(.C
M@\RD.g7G4SH.Q#:BW7HK_W21^+K]K:3JH)56JKfL4GM&Z-PM.(Z-+XQBDdNNNNB
T\aMJO#M==9#M1\R.]Q5YG&EJ8cFT,,P>cZDCW&bPAeT[b:2F4OI>c(FP<9V].HQ
aL<HJd/CBNA)ORWgaK?c:/JV,8<(@=CD)S8)#+;S)b,/cHUWX@)R=2US\aSS7-<E
gC5dSQ7>C()gba4VV4<e4a_@<9+c7>KM5M2fWTDG]N>d4aFZ3&@)fFFW7:AgP@]7
<=TE,CWEFE@7,Mc8c^QZ.TH)Bg]T/=KYQ,1(=#.=Y.-ZMWF\W)#L,F<BCPLPO;&W
\\DFOH-=\(/BH(GH.;F.UY#<VfY7DRe[e]/44733_aRZT6#aeRUUE#>3e/H9V:Xe
M[_Z4\@f\cgGQdDW@5UQ.1QgX[C<Z,cL9e52[X5S/&\:aPeG,TJ40IB40XBR@RXN
]\SU5[&Q(>:TC^+fHT#&T@M?gC.N^+_R,OQ-Le0\CLf2U@@REb)ad.^2A>LC\^DX
\R&&M50H3LU]7V/U6=GR&AJBS.)&.&P?W+1c<eI0-<^<BTLJQcZ+ScQ-2V^J6\E3
^c<9A2AD@-;?1;aJS?@S3M?^W<gDCUDZ+R#,P=-4Qd\CNgXF\:[&PcV?fP&^^&W>
]cZ;48QU6H+B?WG;OUTFOBZYW#9;VY6=;XE39#cTcBaa^O?>.KcHTA5:<EBCR5fG
]/BUEgf\7ZaSO(g.@ZdI>C\-+fE:2d#<NEW8:gVYWAXWZR\0KeVg?37#<1bc1(gX
&B.KC]G,NO\e.b@9SW6__G/73AX=>CH,G7\f#OMM>Bfb:K,W-):Y8&#2K7P8\\WC
>YE#?dANLO,?9U0YEFBZ\7f><PT6&Q-3@Q7GY5QIKY9RO<F?<7-,)/I/P9VL>]PN
ERDDeQ.5gN0Y\W-]G[GY2HSK:[-AW-,bR3,A^9;,M]?D6T>H/Q5K841GIIa)O;4X
e.#OFBE7OL3<OT;SPTD=MVWd5d#CI:^e)T3a^X@\>?:6Z4A\A#V;3#,>6=IaA\:A
3c;Cb-2F5JW0U\OM16;/5&CM\FFbgc4>_W6C^Z,+V\6)3B>6D(7HWJedQJ0@)WJG
?#93BGBaf[ce-.YId4)M06X_E]Rg<C)Hf.SN.XW?C3EFWVM@?KDd7f\7F)d[N[aa
7?O2^Qf(Gc<Q[PECPUZ3FH0-:S/R20:aPW,F-FA<VK^B:N\/_2DX:eUY+/?Sg))N
--/(g2P+5-BG&)E2:<)2I96E3]>MMJRW/^Hb.&Z8UM-:C_g[IZEZEP95b4,EB1IL
@NB/A:AS))^9b83PXNCWR>T,-\UA6Z>ZLA[DgO4SUE(+?c:2PE>=6J^Xe7@ePGf2
R2H5B6e)A1L8>&RWC@STBV69a@D3+H?b](:GLcde,#M?GO.Y?\_SU/S<S\Q]Q7<F
c1c?8RBPJ:eDf;NRNR\89HF@HMLfY_3g[dVG^ZR\-6@,Gf^L=SO)MHX@>C76Z)M\
<&,64(DM<+UC]C;XggZ&SfA[R4Y_5&aQNQ_SLMLLWgA-OI3)9A\e,G0cK(LT876M
\,?X1;\FD.O+2eZPGZXf,G7XbEIbKI&W0X[]R_APEcfPd9+8Fce=4(]55E0>6JaK
OG:,HA^R:).NfP<A1_a85:[NU9/(0a;O=#S(PLO2/@aOHb\-4geN^[0)-B;Rg5GZ
W=<>^1@dg:6EZAV5&/,cX)Yf<c0DP0c/K_>]f@,0,]B&AKD51Me=Ag5U1F(PN>Ad
MgedZ/KZGg.Jc7Nc14;,87L,9P#5(RW4]g=9,V9bT:6EWJB5Y3f82^E/F?XS-R\Y
:8N1bY0TSfg\-;9Sg&+W_gYOJ49d)^5??<M3T+?R-WOPNF#cE-?aL5N_eQ2[:N(2
Ff>)dJe_F=)#W9fgD5FLZ0F1g&gV(Qe2,SREa028^^ZU:-=X0_U;C-XP<5#eQUKE
)Hc0aU]9N=b/;C(f2QFGR7V0J3P,D03]?eOJb3.H/QX+GfD?L+RMOW@(5;:V?5+T
RU(P.AGVZWFN+;De7eQ<9XGDQ5Q#^6-PC^A;7SM?_Xb))Q))=-6\0+gXHLL6<N10
X_@8<c20c;^ES^,cY@4&&>e3G,7REM,9?O7MC[MW\g:=825>Z+4=cMADWZM(3M2]
=S\L11P3I@7^PDRbYGKUY3R>T_B:5D]JQ3d(G,Q2@N#:)ZWW63GD5+<[5;IX.gRP
g7gJ=\_^INB4+:4K&W,4/?9]cNYB_]N)R5I1cI(gQVbJ,&8?<LWaOcWLN(@PH07V
g>e\[f+L;BP=GbSK\4.9]dHd>G3=-K0UG?B:d1VL0LMU7ALc.]HJcWa\KS,[S^?H
8W(6HY9AbN)g.[70=2QK?Ig)L^BdGDE4cGG-Z/g^MO]NYYTQ2/df7GQ(d/L&&=H;
ULS=;YaV4A1)]S)a6[90K9aP4Q#fP6:4+VW\cV@O\Db=7=.D\UD@;,H8VN>]9ZWW
J]gSTAQQSUD-)fL8A2#XYSA,e,BeG<_=<@eK(+HR.CYA_B2H_UV65KY35G)9-4c[
3,).TFCN#1MPS0L>)A;8LSP>aT,8LL<LT1MY9O>OT3gbXOS9(7\>4W9_f-f;UBdX
1\&VB6/gUgK:R/DYP9,Z^/+@8I[BNGSUY]bGO>VaVNc>+PXRU.?@7.]=+K3Q6a&X
]3)L3J47JIT(.gMaQ&aM,fUa_BG3Fb3dDe8fR.NC=<H.>57-7MP6,#PLC7b0e0\]
P1X4/a[5XM4aa031N=:W>e)GHJe#B_OGKc=A4e>7Ub1^bbVMK0P(\T^@g,<@O5,8
8RbL=GA[[07JgTAd/4bZ];e;LH.,IFX\f.D.?)(:a:K<78=J-R<UF^?aBMK[Ig6>
]?7:MdN2SRbMZ\;]6_g3#?>-V[1KOO-Y.,(2U+C3Y0Y[Uc=I?6C+&SN14=d5GcZE
>Mg3NSYGa:V5fEC.3&?[L;gIY_S\W>=QeQ#C-,_bF4,Q17fH_[Yg^S9eaQH0f]G8
S6XGOX\Yb/1=D7LP=<JBZXd<)ddU/;PgZ[]cB=V6T^XZ)FD5J>,]&R)VX3eJK+B/
XT&8(:C/,YL6I>&_.X(,7E&S7LE+UdKGg/cII2Y-<_gNR(0fJ6=R90LG1H-XH:GY
P&C>]M76+61.Cf&4,//Q8E2NKR8G[\R)]KZK(;F^4c[-M,UgUUW-5e]FPJ.W:(GF
Wd\VX1(8?)9RY,&fM@R/1^P\F[0WGL1XTY6WDG#?\7>eTS=SG2^N+49egGHQ?TXD
GVFb-YQ-0Q>WO#d,)^K[GcM5GHA8gb/OJ>bHB^X>@\2W,E,&@912VL8V]X6-RC15
,?C@935B6((^70D1GQT(6^YfT3_[:S-Lgf+YJ]2I\_:P7T5f[2E>N?]eY<Y>B9UM
=;-H31^2\K@RX_.@7g_&GG=,P8ES.7JBY?(#bKbYZa)[_fc8W_.GGMPJ5M7&])9N
T9,g88LBLIRT^?;+C?[5RJ4<J0]^L,=8(7CS89:G56DOPC:c)Y+c5U72^9bN62(K
8[VG=]BT6H.d<N/K5,T6J:CZ:GBfL>N@16&fUB5X<;ZaMd3b,P25#EfK45@dJ@>9
K<JZL@-29N6L:Q6,I&9d=VJ+.@O])-=Y6/&J=<NEB[P-gVda+W3&K:?@J:&<RR8F
EWd();@(QC@PG+XD2/2EDND8bKP(f7_-7V,EX:0F8]?bJ_P>L/SSC:)=N7,8.<]g
gX@3)R;+A-fgTV6d5d2N8OIaeM?SZcZ>)-dccG5+;-H]LN54O)F&>NA;Z/V(Pa;N
b05DF)H:5/g4@5^4:QCEgYKb,+Q-;70f)SaA&QDN@^)OA69aR,&.LQ4gC_fNHC/<
5(]Xf?J#PO#c,=(5K,[Mc2</IQ_M>SCb?1&Sa,#5\7)GOd7<.)Q-OX&T&L_<SeX_
D4;C>Y0KSZE;0>\e2W<-4U88)U_-@f2TKMa0(<N]-W/&]SR^8+@5RMX9aHJAD=CD
_OKSgL\KRK^63SYP7?Ke2A#35(aFNVDLfLf,C1b-^5]TU/0e9F03#YI(b(]JB6AC
APDR>&eKI#g6LF&G4VHNDH8S061YDIQ29F0eI,\OPVS0;3>d-6(ID_.cL_(/VE/3
3gO7^N7SQQ2ZES#8F@VgZS\LcT1CPOMAJ]826;?2^#&).3W?<YfNaaIN@T-Z6>c)
)?_10b2W-\2Pg.KD)P]-0fSaM4QeD._NZTBSYcFE-2E(gV-?#B)ac]6O#];M9VI>
TA<6V):Fg4d9B0[aaIe]?9>8>H;aFRc70TDZ8O0H?XT)=)0,b#gL@SAQ6b/f/-55
X<T[.S_RB-M36JC=]V:#[Rb:U7d](P=V\)b[QQ+^Z>3@YJ^(02X(e);CVIH([8R4
CC<)M,13JB>/^R0JXbCGM&H)TNLE-F_A4NW5]ORe/QZ78GbZT2YN@XV;,?CQa&:)
X4FZX:J<H72gHM\;dOV,?=_KA2^TDR83WH6=[//b)H/T+5K\P\^f7TB<Y:Dd.5cf
L<I\aAM:7^\1Y._>70]NR,P7\&NC84.CfTI>dZD>UI&-Xb.Qd_)6+U;-01(YI6]+
KI-03W_eGYRb7/U):Y52bbVY>Rf?^c;S[_B[ca0adfb_+c7>0Y-G5V^MM-[a:-2O
,85LE=7S?95_Fb^MLQ=@XNa@FX.:+K7YRN.RTHJ][)1E79YeW3fJd5F3\;),3VA0
N10b.:f<X25BKLJDGTLD&cD\1T-W;;J\TE@J7I;3B+EaP40XQZ4Qd(B]E(QE4,aG
:YbTf:C#a=,dfdW^FG@bEG9DC?\c#E.2T\:DQ<Tc7g9.DM@(.)EMKBUGXFS9cG@.
\5JY^/f,^7[gV1I9afV;90)<9+^MZY&FW-K)4P_>:>+J--/Sa@VRKG8[<Paa(.G2
1FEUF4LZW)IWEV;UBPd:7TaIXF.#FBSS++GFVa]<T([OM8UH>6c:@GR^_a/5b&H0
/bK::6Rc4EVPI<4[-d?\EDIc_3-URIQZPFJ]P_SbCT^Z:Ma=2-/Z/B_@NYbLSgb&
RL[^K5SHY&>U9]#cS)STb.]dfG\.K;3d@W&8g&5MLM4#4/)WHJC5WId1.@8)X8G8
gI9eeT0+fS4A1=7)=ATAD(#3,+4)UE;^ZUPW/@0[&;=V6FQb[=MaYVV]NbUPTZ+e
fagPL])8[FZ1PU4-?1^&L[?4T^QA&S(DI6#FGAdKT\G.9eG?YW_b+0#?B],I/[2g
;90+g8ZK-gD7Q@_O83O-7BB.-=OUe#>T&&6)V(0>QGHXH@RS>_+9&W0TGG>b)01=
;[-RUBLR(-Wf5AFV:,d1/U<AN3a\]6AJ)N3_IAV_Vb:I)feB<@C20U:A;b-XM.]F
BDMEH>6(P>\T&^PQ)01>)\c2=J(eFW1;+J/#3C[5.QRC9,<8HJW\a\M/N-6LDJ4-
+?@MW-@><LJ;C.b<aL:73fbadeE,PB[R,g,#HG/S16/\.EMQJ<(ZLDWNIdQ[I?>9
b#GCKg[?-0>2212B\5#49V>F(fS_aJUb8U8LTV>G):aH^I5<_,agY\YMO0\/XMd@
5TW)C#[ZGG0,V9,c]&EJa6eJ(WS@R=H=U,?5gE;M)\&749Q)R]3YV\HRE^K?+B@6
O>3IN(((2,NBAR(UJZ,c14;J=21K\)R;Y+6B);03[D?<L0W_6&4SFW5IPO4VYFK.
ZSY3eFKD7S)D]94,eSI@8.@d6Kg;#OX1;(?IF]NZ#&D[Q;/3DI[;918_d1M0JJMb
)#I^=JZQXDUUG.dgg.EXOP^,+78)LcM=9]G1IK]Y=XSFVIUP9:f(,QUYQUF6^?C+
G;bbGa3aUg@XOXTf8SGZP1U=eg8RF9_G8c@Bc.W]U-1>OE[C2H:#cK4B93)<.UBG
,.84QYK,3d8-e0A(OL-G5(O1VTTZJ.=F-^QK@:Q(ZXS^E7J,@cT[<+M8V@Se7O[X
;MGXWMRed>M6f]EHI()DO9AHJ>BWFJ^;W>a+3)#+HD:&1_d?.BcTca&\Y#RF)X^9
UF8(c:V]:\(&_(d\EWDb/PCQ@8V1IaT8cAN]L?^P.8;bS;=fC3MG2:J2GP5aDLDE
><O3:G7-],6VBM8:FPED-PT(UcZ.7DVdCI<=UIdYD>\c84#6)a&IRaPB;ZW(d(HN
.0/#8[:A2L[&C\Fg_RPgF8<:PE,D40([7G+gg]AAT1491)HTXc[N<7I8W7K4)KAW
+)3K\J,6\ce]]M,3&2CEc:PY37.:I,D[ELA0NSQD[C/Z9E0[AZ)9.1ZW6S=H67T=
)F83UB^B)_Z<fXLWFQ2Xa@]Wg8,Q]T=,Y,D^Zc\E5?<c2V[OfgQ\.cG2cbT+feJI
2T0eNGGaf#(UfN^W]&SgZ=1^JKPQW:C);=93O-OEaFN_P2T7;\KVegO]/3eCMAPg
@EJAf1EHYUYQ98OgJ3Y7^a@M3:?)^<4,N;SS@g8?3MEO4XBJF390)PA=gSG#d-8b
/4=(Ff;:@R,aIBZI_&V])<3a[MTK)[6.e]^H@f=&9?W;<ffG;#ZX26ULP&_A0=<;
;#cIS2b3SJ>)Cb\N_SEbV5OK:RXBN6?C(LNG5V1#<TgB.05Jg(^@c4;94P1/U5(d
c<K\,^;BOC3^gQXR\2S?NdUX5\fKFI;HD^8L2Y9M.X7)LaK)(8gL2#<-T>E9[UH:
B8REV=AR&[2V?cF_+>beI[_Q[/a.1/X/^WA0EcUK]TfcJ0cXT;J9F#[JM(^g?K=_
=eBB@ecH3N#]:[KRS6]VO-d7X?AYN6YRa,Lf>Ab;GeV+=<F\M^aeaD;G9g3QW11&
GVg<JM7GH9LZ09_?,bMI.0,7SL(.4?14TFD-+d-f(&>MVV]IH5bQ+]93E36NDLaP
b[Lc#?D#V44\3;9T7<^)-AMT(d)DBXS]6b^dW<0I/6BP8>8Q&b5fC&_L7.].PKSZ
:A1e:]933C+XQ4W/2MC2Jf09bX@M@TZ3\,Z<[eZ&R651V:P^HP)fB761c_S1\M8?
C7(7&M3MZW[a2/;S066P/4/\LHI8)HKa:WH,<_.HUC2ab(@@Y^XM?<>A@?FfANR5
8g=B&;d@-E030?3FBA\0EG_-e/\=3EQX2)?O]e<aGZ.YQeX^A^R[g&3(]f7RB<dd
N8N;:R5MRJ3,a_d^d2C6C\6.NAE48e1IE[<:XWBM\WNK++HeO61#6QX1@3/W7Lc9
bN+KFQ&;)b)YA/I7JHJ<8\#\aA5WBd#E95-;;T=2OCAH6Y]5&Jc^6Y777B9A+YW^
P<M:I]U-.XW0+_f&@7NV;K4L3+T]E73=8O6gX\S;^Jc/0>e7b+>9bNH>0(/YB>(S
&0)Mf?b;:[SJa3faYUg1QQLSbVPZa3ISc+SO<_e)NAKRY6GH8,@&D:T7UO@(/W6C
3(?4+J@dDSg@L79>9CJK9M=d9LD#^B?UJ=5/[#(+K\037.>E/.-N7S0;LGV,/_Z^
=#JG)ZI32ZX>dRUK^89C9R,?;abT)15A;>1.<#^:^AO(M@La/E;6R#eA48:K;DVD
J@MLED<SUIe[d,/(5.3FA_.d>84E8:>81bf2(<a8E_Re4@32e),Bd_=b+8#]M@\B
[7U:>4=Y90_SYK[RIWdE?YO],U<81c,#Sf-E1HRe&\\Od@P7UR5Sf\#33Q8KES/g
B\CI215/TF.&J_5?HgW6N>Ra&-6bZ0YH:a<3G0[^711bF)Je,X#BRc<-/L3J9OO>
eE\E6ME3^OKgIg:C_RZKIH]H2#J7/DW2QBLS>LO<JEXdC2E/-Oa;<X15=6dA1CP?
geIbY2?d1-?-AZ-^.GU7=,f&:d,^D)_=L<+/5W;D=SaEB3,?1L](@g_&Pc]J;F+(
M->_IKS+=JcO<X>LN5eSPgM-:1OdE[39.?S@_2FND(7:YX22Q,S+0e@ge-#W/>Pg
T<A&R5+Q3O,:^.=fW3/L1PCgV7)L/;aNR#B@)PV:RU-P<AS3\<U]9T-^4R7J.[N[
Ra4fC9IW+5YS+Q3HAYgB?gFP><c:L_ON^)]#QHg)Q@J6TeC(d9DF5)G/UK:.3U,I
L?e;\/1X+\R#HSSYI?MS1V4QW&5eWJ8[83<=NeUR2Nc)#Y4g02)9d/L21.a#M;RD
Jg<H#WX\4CQ,0c.TEHSLSWf)=Z_3J\0-?X>13_B>3Ag4cT?WZR@UF?:_8XN=DT=g
:e>;B<I8,.@]f)L,)>RYI9[FJ86T&B28-MVWg#Q7PT[b9K6D(Y<]&_2W,K;N-YW7
edXM8P;MNOI\[?(VY3O/?<GO8,-:5_<^Dbc?JO^d+HJ8I=RQ,F(aI?b5QH@=Q[Ge
H@J\.1=[H1K951UN@0@1X,,^aY]6<LKNfM57PN24R^9bC].c49CEZRcKIe<VBF6P
GYHSB3V=+K,@>H;bQ3@Y18:+gfT=J1I@c96N;LLN.^B7UO^&e#J;E^g<U@24>KJ9
/2-R&TVYIRFO-6FcdZADeI+F_?gHOSR;47JH^b@HW9Hd#bYf&[1;KPDYJ;,J.Z4G
-0&DY7b3/I08SW+5b-5)D_6W^e#X:P=fO]bL\,cE,]@]aV5)9MV+#@OE7M]b#6>=
b7g-07d.]L60A_[;f4<(GUD1B&WLT]EDPU,@:NP]+_X1<?#b8b^UBgb0[JTPO>@D
OB8eJM4J:AQ:<f:I7Z8:&MOTe#;,b)d4a-fT-/L_bG=VMMKKJeMT.[<:TP8L7S<N
OWCEK,Y0M\;6+d:M-eTM]We]gbKN6Y;+3^N.D2@8OUUS5FM)A9PX(L<^-Y&;aP2R
.#,W,80cZG6Pf,3O8BD;5c]_4eV,?GSb/>,5=]a?R@H#+Ze,:Nb8.BU(+]cU(7YB
&d6ZF/eKRF@g+SX.LHKdH9)>;VKG<,H&]PRD^E>T^P[00U\;cXD7N]N9-QU-NL(M
Pc@PcYB;TMd92&F]R/g74_.C-0\T8.=a)1NeBO26e=(Q&eMMCaZF,JE?;-3>=YB7
HCQ(QMBQ88NVQM8;I7fKa:fOQ#efNHL^LV)TE@<P]=b/TNfYFG/)P[A69I-g_LLd
OW7;/M7)D^-F<K\?4=Q.O9ULILZ-6/+1A)52Eda#+LHa1&96.KMO^d9J(3511@:O
-+VI[30E93U+9[7TeG<+d^F\U75D[E8C@3FT&J7ge,NL4A<e5e9UU[9bT636HM:L
QBfU0E7V.&A[=E/K<^^I)g;(#<4QU[RcM]g82^AM&-gBb+J[/^NXTK#N=8_EfYbe
HI?<eQ<LI(5]N)[FY.1GTb1,WTX9\,PD<P@db>DT<a[NVa;#)NYN,W8#7AG&U\02
+eK@QT9J)=PN>CCA#,DZfNFbHBX66(:V74TUI&JH51O.5H_+9T&4-K&f8&1gd+6Y
#+e[cdNSOgE:AT]M^&\1e_&J7PedG@N0af20Y##H2,8LDeg&L.9E04@<a\FIS\C9
&VH(B=TZ])CJQTP.;9?#X[2R]gM8/^-MKC#2HUMcfB<7PLWOKJ9Tbf^IbTDC&c@S
>L\2KXU>0TXUU:dIN0@XT6Vf<:c9DOdTHQ36de&^)>X-A#5G4=PBC&U_8/_\-b/.
Q+(/FVPUNIEeT4903dXZP(a4f5^a+?DL_5.4\6;>>Z2.,F8BGA]W+ZN+/JUB&;>_
=VPO&/I&)Qd04W;WO8?MgPd&>&6S),YV=5fE=IDV#54U(RCC[XXF<5Y>O\96Na1P
2O-G@#;bPOL.MCYfa:8Y42fJM3-J(WKKJ;/f>31JGSN#1EXBd,BAYA?E\?,TF2M#
Cd#MTFP:[)(Lf36QL3A9QA8.R2GK9I(#?/HB7H:WQF5GBO=A4VH3R=G+W:-5DeB^
52O)^GOEVWQJaeTR^,V_#:&#T^4&,LIJ8(:RgLT6OPITC/E@Q81Oa91Hcc]]YQd,
:E6c,X4Yd=_SSZA\X_EEPP=7O,/B)JE-G^M^(G+->JD2S#8f<K5aC-gb=[\-TBH@
?SV.7<Z9PAILf.N[NY3WEG?-UeUf\]JVTbC@_A9Nb0PYZ^[@fKcBBY>FVHD2C68<
IK/a)W1)I52Z,V-((@TGdYP,@T)9ME5aS0300We<&:K7]/3AgQCRYUGTeYO]b==c
6(T.6&6LO.Uf+cKVM_@A7YLb3]PUE,I&X3)O9YbP.d#+>H[BceSIQQ>^#2I_+I4c
[[(6V9I3cEN+c,JU0G?#.E\4\@SFVQF,O68^&^H(94f@>J[We>]T1UVFgg=3W57?
_<:QQRH<A@V0-\5G8[fI39.f)Hb(<Te>KBeSC0\U/;?9)>V4f<7BV5.3F:SPQV^+
UAE:T1U7YX[\N2VKO7GFR2b;[6Ob8UI,fHF@L=QQZ[E-FRIHF,7SH_#\MB6WWD2.
.&Y\1KD5Y9=--H^2#f#(_/fGLCc=]C3]0VTKW5B[JC4\eWT+5W+G\PC(X)g0c+Wf
JS_)P(AZ/bKL@8]MOPP_Z5-e5AV8>>RC3,E2;9NEP;M:]OM.&,C&7[Rb_&>XFUUe
^,;A0BI0MVQ&MWC\P.R-Q1GU8)R&d&eR\g<Y8b<Zd>H;4R\):\^OUf,IL;6.gMPH
X)^=<]-(/DbF_06+W6STW>Q5(62-N;0Gc\U,=Wf8FLE<J)T3(?\9S5ZAbXAHK//^
g^QDTG1;6bOQBEcNIY:W@8cAU3QS1QW&9LNQ(P^5(3R6bcR,#bJ-,[dT)S<Q/F^[
-7Yd;fUYd(G?8X[?U@&9I(EJa]&4]9GS&^MBf\&O=UJX17\SKZ;1G@ccd<G.A&N,
UHDA-S/g+DgYMHZaX\8W#)6&0H=&8&?MN>)&6E-<c1V>_T@_RGf6B.NY43fVeY=F
,O.=#9??A#W?C(Z)U1^<(/D9QIZCM&9.CDMRMP:A\]@+&BJQF2Fc>.E(L.B\R\3-
DbT>:[1eeY?L\JZ,SQC9P@KZL3I[cbRR;aAK\/-?K.<Eae8cAF3O.I(f[V4(J;G4
3(I5GAeH(.CA+)(5],1F/+eIcNG-^#d>AU_9P2<5OW&YLL,7W.bBO5af;I)>I8DH
0HJ,P^>f:6d;2Fda+NCD@Y0U(c&37CQ<4IcUNfZA<(#bR^EZH2/-A8&]SP#)?DHE
B([8JU6c1N8M5\=eV898W&5WPV<M]_@&f?(BfR_\&GSE1PB>aC&NH,W\g?DQ-SV^
@cU=[XA3M?EUY]7adUe=D_PI+WK12c91O-(&<E+^+a:BVJ5Q+I1718MD,#VbM1gc
@&aT^bC3LLM7-&9W(9E<<OeS?1[)#G?9Q#ccOYKWV<3AGCM)DBU9Z>=bO^GC(XMf
IRAb]cF.Xbf-5-6[Ide;7-O.0-+T<(0)+2K=(@K5(JW^T[>ZQAE>;4X.XG?390+d
g:E16@b@a&67C[I9EEP#e>GVFF3/LWJ8W+PbWFI)CT8X(I^Na4GDYdIN-59V4^E:
82,c-G[@28-O5W7=G[_DEIHPeT&,<:O1ZMCOJY)<7b^LDGC9L=/f92,M4+O_>LH?
I7)Xfd3g8aG-)]e9UD-\BZ<WV_JBV[_0[)W/7[P\)@)7[72XYS]27VD<\S&0M=a&
Xfg4TFM2K\Fb>G3H2+XO>a4[X[4+U\S#Q&KScA1U(+6)gSfe=YR(R6MAJ]eaN0.9
VaNb3L8CHY[JZP]Ma3,S9J2C<2DHg(DF(JX>f<TLa#MK0<Y/RYJ6=eEXgV)6KN[/
;(8=KD3<PJ82MK4gb)/#+5K>8Q9<Z6J9G:a+NZQ;H.HBGUfe@P&4&5BU0cOXCKJ@
.A^]3L<>]cDJCKa]f&[JQVJTDLO,B:;Y.5WF3^_@P/#JAS(5J+0@#4:;)VPFe3Zf
ZFW2TLILY3P?@egL@/LI7-XHE2Xg>W]\Z7/U__,:aG<6R^./KFT/c(\2\>XXQ3-U
7)IA8IZ]Xc1<aXGW>&+;)Paf646A>#XE=976NH^aEOZG>[RII.D+\73J\:&21Y.H
L/@^Vb?Ge<GZ.b6PIA7gKS@L[/L.=?8^3#fZA6ITADNKGZ4<c^XVBCE&TU[f4fUR
e<8@R-Acb@PJMJ&4SaJ_F+BZ+6>8fB))YT)S_b.\dY][^.3#+.GY0E3(;eWQ\F2&
+T.GF;E-72@CH<<7aY5CQH42\]TdDZIZ+FM;1acMe@#SGOd_./[S.2.-,08?#dO>
gB[C.4;^X>M&cL3;DN.6M-V93C+/PS>_Z>.#L?4RN=>HGOQ0ISd6#M<\Ob>T9L0L
YDP_@_UKW7,CZFU,.\d_=/VJK.<)1L[Gf1LAZ\bSJI)XEcY&UeU;#)3/_V0PEc(6
--^N_K0ISBd\D>^7,ZA-6@5@/NF;a[c3UPELP:4R&.H3bFfW)&B14@]:1gS11MGR
>5LQfTNf&#.2a]LgC7/J6d\(UD,U_)RU7f/Z4P#Q+6cRfcW9dK@#KBbX+cMZPG26
=bH3G?e[6+OUD1e_aU.fDe;Q3bH8^/9L[0]C(b-.2HgH9TF2g;,)c6@@UO]NI=#M
0e)4H#bgUZG=+I^aV-B=[c&]W_._0?b/^Eb.KSe1#PB3X3UNH5=A]4H6\fI;Q_49
&=@9;KMEQ0,^(?BaHR>U&794e,b7/fZS#GJ8)gDYN^ccZR@+:[.@\MT/AC8E;GU.
+fLfVLd7@?QOO^E3FRX<V4VWg[6E?;\F7IBB=4#K,GYKM?14^NcRfH@aV+>0&BIM
)N#7bX54Zc7AM9BKG9CXTX><<TEUGSE>)1,7_I.N;=GA2W[5O)AZB,DC1EVOW7LY
P_GZ7A#Y[9EKgL/Q_9ab5])<gZWd(K5TPe\UA_Q1KD.cG@LT[d&X(/bTX?WR[Oa<
G(8dUL\cQ@K.F70.^]T/-HeTR&(/QRJ[>d.C1Rc<dT8@OUDTL\JG]U(KJYVF]a)a
S^aAf@1)EZ>G\9\Yce&HY>5+2]?OMff]YL-2K6)J>=?6Ab4N[846R8?UHP(X<NH+
T0]^IM;,MF3#QVAA+b8(R[L-0>8bOJ=@:+)@;&HZU3H&C[)B.D22ScW9/>KY977@
PY#I5[6P(FP8[E]eW;CW2F#96?MaN8ZUI[;P.9P#@6K,>bIcN]:>\Ba\<8d3bb5B
CX2\g#WYQgbe.dS>XQ@Qg6I7/LEd^\X#;?fe\6<YEI@F-RcUC[3OU<KZ>d[0Z^[/
N.Sf.aZF0.J8@a]:Dd13\EA.6VYOF>;CUZO]Vc1JKB:07[^:&G?^M/2Nd3:71ES8
#Pb=5GQXCKJSH#A?c??I,,;M8A0faG<5W8g(/#\c);fFf)G07+<_D6?;C49=eG&.
_@DYWKL0W6S;5<+IcB(Y+g:NE??#HWd04=WJTd?08OADU@6^<T)XBLXFD]]EQ_Y+
YfDP3bCF]I59BWMMOQ)06KO]9;@G?aR_>ac>9=FeaaX#BaCZ#9AbUP[#4(aQB2E(
ZXHc7J+PSV_HCJ>J-7#A^cYOL=bIBY46.?)S<#-3;_-c#AV5]W@N(?gH7[.=d50)
#;28e=NH8V:HPT0J7>JE(Gb#SZW=/a3+5P9CM]-GSZ)B<T&+1O6FK96S8<W./:>C
#ZN:F;=]#6>EgF\_&4eU-9VbK9>^[N6YCAb^_F?85c1/cI[<dV#XANGG5E;MH=X,
F+VTR\)NWBX_+6@IRV+VL4K@035#caLS7+6J-A:2L0<Og6LP-fJ4[FcfQMQ(eKIW
8KfYQRBeC9b8T@BD?Q1Y&a9Hb;.#TA>.PS&-R37aL>P]XT8XfX9b>d+@[5:L4[1[
;O:E0J?e@PSeCSdaa_g1)DQ.BQ5Fd;/+UJX65g],0+Z#KFLBZP:]#b#aTL1=6V<e
T)?g+-87+;N>ea,g,]T/1+.:>Z=]<F2fA&U41/[P+?A-2RJO:^7#LN/B#>TXWIZ2
QRER[O&KN4-3dIX,7C#)IAK,;7@W,cC8X]b/(SF._dc-fJe)X-F=BX/.0,G?2EAB
#8Ec@ME<:I(.2=#Vd->?([X,Q[^f)BW7ed4a2g?X5PNc9K@S9N/#?RbYg/GT^E99
5GY@@ODI/,J;6&B>[^FU/;@#0aZ<SRDa,XbL#DK+@J&?KR38N>D;R/8-Z8Cb)+Y6
MF<4+F>VBV7(^YE#NP3Q/deF,M(RNcUCRF-MJD<2PJga_NEACTf>/IH5]SLMYeAN
T>#>G]P8R3T=)JBBae\Qe0Cb+^0Td606-Q5?GTLI2_YV,S3a>Z;N6E#?52(\]V(I
QN4T7OO[.&aP0/>Y[WUe_X3:VWNfHMXTD0+V+S+C6@>Y8@(ZV&@c<IW\c?]:2Dff
I3[)_^VWa[NK6DHU.=7S.b0ULM#4J/Ob^HaV1AA>]gb1>18bPS=f.60R^85(@#[C
0Q9OgDKRASFRaHSXZ4V7aQ)eE<EIEWU4=Z.XUUDOSS-/Tf#&f];8A?]1FQ0JUZ:;
95(9GPgMBM\>S0V8egU,C6(<AM&M)</<4EX]=&;\[)ATfG2a>4a\(7LUL+ANaQ&R
W=[Mc-J>(b0ZA2//O=Q0<T9VGcIS&2CD,X26?,WLQbe;e=)OL;[/3&_8RZ&5)Ic9
=<>/HWOQb&GG<ZD#,F_B\-#e.GTfbYZ6CGBHge,2@\^3Eef24)<W@,JNI9TQ_?G/
[QOfKLe/M1?21V-8JPZL5X:A#A#->5AJNW17\g):b\^J^:Q=a7d7P=JNO$
`endprotected

endmodule : USBDevice

`protected
218M3XfBO\9eU^Wg8K8C3<:<^1N2aQ.YAG8d(#HA,2D3E2YVNA3J3)&U?RLd6,_6
@:#7\^X_#.a=HJ,\RNMZ_9<C2_<f--@J+W5?R@]IWaDf?^DN#.,@,Zb:+FBXTAO^
<44-6f-D\:TA:c=8-]cA-VHGAG:0:&CV_5f^DS8)OcMF^F;C?^Z/+1.?7I64+]+b
,&g>EGJIdG#]2J@6@1_3YI<RVE.<RaN>/#J&VC(KC1\=)XWfgOGADCA>?M1J.+^6
D[<VP>,.IMWc(.[>g=2+YLA+J#AS5E5Xd1@Ca#_aFQdJ&Kb@/XRM5LS.0GN>feO\
G(A(AX>N/@AE9?[IV(YPZbR15^UMV01Q,7GTC3S.FNfgPZJI&)N#H,#UaOA13FZ(
B7C@R-f8f@-<H<E1=g^b<?W6EO9&=1Z?7+A\Qc&527.-;A,&&R^>T>0\.(DcZa5N
1K7<)d(WLNAMTMbcKUHBQ9RX]fIALLUT8-?NQ,6CG5=aCM?3HJ4+gHK2L6(L>.98
=DBcRd0-M^M54CEcJWc)PfQIB9&I+D+89_Q3UMP1QX>6>=.=JOVcXVa+5?90CR>S
@F^-#Z<O2/S-(RJdcdg^e/)/6<3G8BZ^^e+M;<9R9T8a.WTC?M-/F[c(NV#IWO_#
JX)?@&HEEM7UFW>NNe)CBDAV@.SB.AUV_/:-L]=J)_DaA$
`endprotected


`protected
VDadW#c00UP1b7gP>O0)YCO.(I<:4Gf;55P_U0TVS>E])C#@d)b^6)-D)[UL&\03
T@5RQeaO\N>HE.=@K?\^Z7g?POf,.HO<D[]AaPEbd]+c^@ZM,+^K7O#ZQ>E(]ga0
Z4-Q]TKUW-TEP._0_IgA68:_^]D2eJ;86FW<C\=ATaQ),2WDU5].dQ>+\KY3X9XK
/P7E6=Z8_6WKG+)?/@#;dGY:G&@d=dV--JR#YIW<&c_16CNF7(6&;2g499X&\9?d
)g_;Q4^LH@SJP6_/BFN[GQNebT6.01-AHa@2KAZJ#M2;OX(>OcCed625L@CS7HZ(
>f7bI#@:<QSSa-0JV\8G.X/2LNCAbQ:)+DLAc,>>UH\\I&(N:/R03UY.bO-A^./c
-W;1M,_U2ge?^<1?RU\E-])Q\B@XA#3e&)MeNXT7--5.+&D>Ic+.2fI+aT[-<a]Y
9N;+&0:a>.)37L\@U[EMD]<WH#_f1D/:]H^Q<F#fC:QDMN)E&7Le<BKYc@F&0L=,
YW=;U;A91[#.7.(A@:69J:]APg8:Dd]g&9_)Q2CeDM2,^2&8>FWGC)GPWCTO+-1/
a438^d;\dZ(B:8ORED5[-Z7(U&+0[?C_E\aO1J&+FJMLf6@DJ4:WgB;W^IBU&;\g
RZY;0^,F/&^IVc<Ic-?SK76]BL:5GgOdR+4OKP0g[SG=C<,b3,(?C4X^K^TNKb@Q
dU(S.NZ&ZJ0-JcPEM6d3NQ,HH0==;?BgZO.0dQJ8BLf<P@3UDP_^TX?\M+2Zc,G/
A&Y5AS)9X(>T.d7aL\Le)^]D,VVV:HI)@$
`endprotected


`protected
fY<OEL1O4M&.U;CYN)Y\7WaAW-c8BK/>;ga&_JU2ZT\R8T?N7]&b))GPQEG@E:6:
9,eA\27:F9b]:FdALRT#B_gP,H5XS@+MTUNW4^RcH:J6=g\3Nd6e1]gN+_EX<C(=
=JQ+[U;-2g7=W5b.<Hf^=-Ddg<g9LO47eDg-gCcB7gKJO\;3Q-3MTLT9E\)^eBOG
d-T_cE4BHP_dU18IgVS#G3bLWDd7#Q2dM]G?d?HQC(9A/.#4<=1XdQSdWSZ9P6H(
IZ1G8Hgb2_gaUGTB4:\6Og4.KMc]NXLSW[6+XggR6.11(cO3.BI&e5ME/Fg]LAAO
=.3PMKf<_@Z/(B:(G3,>W-aF\0:>LG13P0Gd^NVbNb1=.].g=F,0]]]3T0_KB;f7
1A:>\(C;_KWcI_#AMHJIQZB2<f/DdASP=C_(gb83=+GM]]=4=D[_f[VYc?--@O?J
G8Gd#,]XE0;aA)D&0\>C/&7#_OOT933&-[a8JGT<^eZDT?IDV,H--g&BG3[TgPSY
2KdOcMWTFBV#0@aCKE8D&f<A31g1.G1@HC1AMN355/3JMSc^-?DW6X=bf&+(0a@.
b)c^UD<6QV_398a_C(bJX984MYaQ8_UPeJ4=FIS2Qa<53TC0EVH@G:Y[J\cZS47^
V&0E=J=6cR&:[Gc?VAgXXMc^/B,EQAeL)Q/gNK9AKW^+/\fg#cSHHWf4SY5ILK2K
E5;=4B^5Qc:)6YFT;+5U;HZKO-gT4:We@D(1O@Cg@bE4Rc+SeBCfb;;cK&2Ta:+1
8KXCd@Cf(RR:R7K8];.H;QVM7cefJXC4bd[/c@DM,A(dQICTINg:c\VRPR]E2E)0
G4?A?BeU[5a](N3SKaeZUF70JU.ca,0U5#ZFMa[N,]c,WKeWg6\9>U/,eZV5G_RBQ$
`endprotected


`protected
cPI#:]L9#XO5c;>#1F+FQ865c1\?E>H^Tee=M=7JCO?:98#MEOD86)>Z44[]YP++
UdH5dUJ/FS@,4G\NbZfQKV#P-?Q/([Ved&T4IfQAG(W=fR4ZZ#&6K1#)Xb#SeG\R
]P:<R&0E6W?F@EGgQeUZMPKNO&:&.GVEa.b>;HYfcA<-D#E7##IJ>A:=,ZZZacN>
9)43;D1/-L^WbPg:A3;fGT](Y&M.UHDgZS>)IHXNA@eO[ME<KdWcC(K[VSDBP<aL
]d.>/]8R5fg2#T;I>4<VL<-O1\<DR^>,cJb>U(DW;4ODO5_d9cSQf=4V(TR\040J
W)31?=[H#:M@0#da/3(,UdO[_H=_Le=#=KS#G2O,g\COOTB4SI<dV4K(:,V,gd?J
Y7K&7OI_I^[VNRZTF\d6Ea6D>W8-T7W+6XVHS>RWBV:ggT4Mf>?NI3de7BN+/YP=
N<[=U+FE:XeENF5</Z/[NUH5[ZD#7CaV0^R.J0I[5MgXRf#g6d-FI[#.Z/2-/B1I
)bL.J^Z;44OUWcM]/;#E137,W?UE1,1]a(>TJE0)MJ(3QY)4c1OcGKR;U)I^<YT;
7JOc5+F#()RL_S#GC<)Z:,UX-(dANA#)KG7@JLH7eH,Aa/+9-P/.Jbf=CfCUBa;W
ZYJ,P@bSLU,>GW[MbFD<9A\g#0<BNQ:Ag,.Q+DFGX9AOD?=.EEXP\4HfU;eDP1PC
LTL]7T.277aXWH6FWJZaZf]/]=4OCT1.)I[.L,a5Ofd.B9VReG]A+9?O-UJ^50F\
X[L0>_EY9^:I94RYYG7BAg2V4([+/RHWZ59g@#E[JNG#1(fcdfG8O:0YQ8/77:G4
XC:W]MF([RPND[XZ^G_>5^@#QZ2R)9M\.1/@-G\\[NDWP>38(d3LUM0g<+0A7-7c
&DR?A#S^I,M;1NOUJ=\S,VDg/[37Z33?V3Z+1+5B3/57F3:L+5E=>]@6G7#gZ#ee
&RXDb13&ZJ&V-.?W=W9?_)?N8A]+P,I,[aH_AR9bZZ^E?7XAV=JT7[^A[LZ-[M8>
6aW;9VXT#5?@GZX4Jd&RcV:L(<OC,OEWU3HaAMHc)JQ2XROPac;&gC^AM$
`endprotected


`protected
;RJU=W(/_c1;6>[I<#CBHT65(>=8KYQMAL[A)ADD;CG/5;O9?@MG6)[C5CS]&\?+
#C_K[1aSG_;X_VONTPKO^1-L&#LCfQI7MASR<\GSbH)37ML+^M_]f;b3=)(GB+g<
O9b8#@WSD^DLd&9^<8UaK\HP_-g/?(=W4=#I473XA//fB=2XA>S&SJIAD/AJ2.@F
LNTb<2,_,C<Xc?TN6(:P+&1d/U-6E;_b,[>#NH=(.I]fD:?fV6JJ+4M0QD?eE0cD
c&MCU(>/(5F3[(7>=\bdc+5]9P.@=A^(+AL<:=I5ZJD_D2[^Sf+>KR=+-Fb29R2)
@>2LY<(]REUb0?e3C]N<_77P>=UIBb]c1M9:1TKH4Ra<RPXGZf(T[2@SCE9N/?Y/
Q.JeWM^g:1Wa7&FY?T&a\E-=?N;D\B3,?/<?+<7HR,b,1U23b-\+7CSc4BOG6+c:
?IC/4IP>JUQ)/[U+/9@&9T4eJMF3f1#ega.+)X=M.K<(C>aM_CM&5P(SJdg#^73;
,<)09WVSe:^b3+3WZ#)4K72)2Q009H6L?M]KK)4:MZZ1ga([?&VLT^VE9OH.XTOE
?=FC#KaLWW62R9BO5b\Z1V/<7c;^/[-P\MgH&EMM?,f+Y,Y)I+PY]G_X9.ed9S5a
I>#ZC.AZd&,MRG],H+5V-J2;NMWLc2d;^//8@5N86;S\7aQ<DDg#U<^-UPK3X([(
UJJIW-^-^XLSQ?))D,I_>A;QXFK:P\KT?80J^6C0N31O^E]]]0FDD/>ePc;bf&X/
P<6?(\VTL54M[5QUdcG\^>)/VVC7KY9WQaYO1/XFRR:>W2?KEQ(P:Fd/VZ>8/.[0
LfWbJ#JMRJE[&,:QJN7f#7T+N0IA<ABX[6Bc8[d;W7&dYd0eaLE0]NO,+&DOA^HF
[A7ES]IB;)HNQ]42-dBS?[DISR5380SIT2FKOD047-LH+L[PEAM?N\08TTQ.V1/?
0\@VL<1Nb/DUc\0WEBL<TgU\Q:=fJXaA5L>_d[dT7F?d5_YPCETD4LV3/bU06=ZM
($
`endprotected


`protected
13U)MGN#]I5[V4@7cOZGH7+d:@RA#gJ41Ce_N8X5V;F2E4J;HCY&()fU[SMG92\J
EK,8-ZF0,M/JcF77_0R72:P?+P1G-VG(G_cJ<1KdN+X=F,>2.LF9SBE)@0S<>2CA
NAKT^.cG=L&A/6^G))S3U?<2Hd7A,/?4]T]2R6PFKLKM)C1SQQO3ga0b.^?@1Z\a
L4DZ9H#dERKDI_]T4JLMA=0-.U)2(3>ST7YTY8.5:_/J^[];UF)\3>@7:3:2c20W
GZOL]5Ra;Z]0:;b.80c5/KO\1N=O,Gd2R]2cd@2RL2Z+CQ7#DWd23>0;D\d<,?04
bYW5P7MS->6459f8@H#F5ffMSD6GUg:,N6X-;2]DbH#fEE5cPBO<:T3PaTC,WeQb
b&AG6SOBS^A5SfJT>&_]B(B<M4eYW.7+-_N99,Q,2&)d7M-N(d+E;ISNe4I#2NYS
J@85&+DF8Z:UX8ODLEeEVN\B-PQ#580:15A1=4E6)2]H=QaP1^IWH]F0(+-<395^
g>;\ST\Q2GW&C6R4(?MN,+(A=;^09<0e+I3],9659VZQDJ5a266:Y87+GW<]JY+1
<g.C2YTa5Dg#(G[Q+JRN=N<dK5=&&21E^<9d>SZT1>[1/QTC<@2EXAJQ1;Z]G3RL
-IBVZ#1@faXCAdQ79H;DFeTUN/,/9FO<XMZ=bA;?VXQ>G)OUTY9E.)2NAU#[AU8C
]N0W<Rb#(1+VP3DLcL\Of9Xf[.80BQeD1U[?22_XRWRK34e/?/ePG]8DNT,4\2,-
O939[I8NdO>\6,I@d=AJYY<YWQ.#1<QW#5CQ=d4FN8eC;&e),EYU<4bT.3gS]IC3
L_FF5H.]+Sc=3g:SZ=Y.Ib?>W)TG,KT5A@)[c/+J3BSd6]dFfEGB9[0)(93545;Z
5P;fbaTARdHXg@I.NRI<6:]F=-LL)M>P=.BaK0RYF;1?]XD8^:(aTYMX^Y25,;^=
/<T.6.d<c3bZ/d:S_F.TYDZUYg^.b(--51\C=?a4HIFPSC-3:b5#+N5F);1(:@3.
U/-YXV)S7)D>/C#=[)-C2?2S&F@75F7,f0P)dXY:04UD,[29fX<4&1<D1_^62_C]
fF+BI5E42YRb86.fDG-OEQ)R(Jeb1<P&8A\\LV3b-5O]Gb8T3;b>/U]M3FH3aBWE
?DX,/C<O+0#BcY54/L+P9<GA9ef;a+\?Y(fAKMQ[61ISJ3,>BEVX4fO4c>VdJ,AW
#E^F,bWbL>@Zb0f^D3417;ZI]cDWfS=02D+?5?Bfdg)P<0@2:L(\+dZP,\dG.?X/
E,-2BZEIc.E_\Yg:A=)P_OF>efMD)N@IdZ+]9(L=PVOTEbC1L8XF[)R[b8QC8:0+
d74TbMG_8.MBF\a>,ZL2AT7GV-1XK<:dCE4cZ/Q49XIS+IOS]57aWYgVH:)&O6_d
g93YO0?CXRY4Y>5dH[/X,W9]W+6gXSC>K[E,T]RdC^#[7F:+L>+b[LM9bI6&2\.J
>C7W)F0L\cZ[FYF;#A5<SM&_2:>&^Ia@8O<UL#cf50+VR7(Y1P#X.O1\1&-(MTNB
U>U@P]^1dNFc9bO\E:MHF1]V.HN;d+cS&]I;-7bX[5K8_BeF,[UVg1:KZQY.6_YA
c-4K>T1N4_O^S\:F+MBO35S:5ZCG2^5Yc:3f2)Jd8]fd_Z-:R41R)@LfM0.P<C3&
BYc.E[?,YP9DWY=L[GGc&DP1F1TC0cQM&NC,5MED8N6?8VaX^XOV+F>_31BM7\0R
fFfZ1^5eO9H,@JS.T>##E(H<6SP;a#A49,c+@b-I5U[KBX7KdQ#+S];=@F7[aQ<8
^@X3T@^@(#MUX6&A6;]-\QfDI81O&&<@P1M.MD/+fQ@M4J=^5@Z?a(O=AYVD7PIH
&)I6_0\:b#)+aIE\S>TV#QU3B\^1.YYIW01eCPe8C4U]^gOJAS@E84:g[6TY>=VE
=:>92_1DY:-fgJDdKVff4a9\R/f.-dC0@3,O:f<9bWb(8RZ[J-E]aeX&[(HIf?K+
[Ze&>6g@G0/Nd//BO7(9:SXgKVd,bQ)Ig[[.11BUe.^E[Q#KRF4IQ7;&]<cfB&?C
^GL]N99=[dXR8^J1gNH0?J(AV0XdcV9f5DGF)NCY-bdD0-O#+f=gQ.XeV05C&-\-
U-1ET,L7;RDb)?KaWPcgFFb@CA)(O7EA0ICJ<MIR;b5Ff21#EJ4PSbGOTP+@?7[I
WJ:XB:ES6G=CWV3M&;HY\[SOP70\?SaSGAZUATXW=WC#4H-=KJ</WJ-<7e]=b-KC
91C4O?#-,8JR^[^)@X6>@Rd\1ecJTG_<B3+ZBKM_1.Fa#P>=_@aH_SS8Ne(TGgE^
WaZLNT9Eg1]?^DKR^4]D2,:RFI][)&@)N1D<T:=&5P^(,+VG+KQ@M44&VaFT,eCb
_5(3@D/[VdP&Rb@^1FI1D^23MCIY54E^/5_4<R-@Ia6<Y8]PN<9A\53OGKO>>4[Q
K=&]#cDS5\3_CJ6,fP.O-].c4X_W##_Yg6gg+5:MW]OOVWGV;-QNHB\L[Ff?01If
]VR=_DN8O->^XObGC@/^KeA)490/,O?<TD-:8YPIKFNN=J(NGB7AR8;=R.P45>[1
Kc3^ARWf5gVI/:7.C;-F8-V#]F/6#bUW\:;#e>V4=,:,/ffE#P_AS\gEd^)J\]1#
1L@U422H><]a>>Nc;^K<P<5X&UFO6X>cE<];#/P/EF/]:NOENd#YbABVC>aAgcdf
cUC(?-Wd-8^[0aBNecG_9<f/21VQF^N4(0Tf^2M;MN5M_,6gN+K;CH#MXT7Y4a36
CX0:;Z+<]Z,A&W=QB&9KU9V1B=D2TU9B.^>]gK):Z78MCD\+-@)FTd=dB].,^]0=
C/dSL]B97C)Mg6dCXa&NgK0:J@9;VIG?LB,68[O&#D&BA9JYL1F=]=:_URJfVNUe
KAd+&GJ\+^4B[LWaM,O\f=1@M+0GRGTO&0&1^9U0M@G]5.H<=MG\,&.7NDdT2<-_
^E&+^^J1e_Kg@77YK\?aCe\MT&C.3Q=67C#(GCLe2(IZ4SBJAX\-J3(6FX;T(g)<
BL&<UW2QY<3Uaa1PZ[BQ2V(IGU^K#RFYgB3Y==FHNDMW9&AUg&8>#f9-geT&WeX5
;WJN;KLfY4]c&ACZ,UC5RM,>^)@-IB=YHaY31KD<&>M:)Rcd^BKL7JXOJ2]\MLG)
(]Q)#EM+JS>21(H-5&C-?;We//+)OK,)AKd70\3_,)DgLVY]@=UFdB-.\HE]231W
V_fZNK.eWJZUS@8]We41_-F8]8FNN6e2b-e_M5YaJ)0T?^@EgbDAZGXBKUGN04=9
^fST2/58/5)_1@cPb:N]Q&=Ne+B\>3/_Fc0B\?P[fcf,_&_NA8HGT1PF<B-Y,;g:
_VSASW8FI5MI<_?/gNJ0[8E]A(g5/YVPHKa=aFgI:.OIQ-aaNSNF9GYaYSZea)[g
eEGLXU=6fGgD<-[B.>-b;YP(7Uc2UV7IC4>(N7D,c#8MA)K)QYI_NL^]N)d(8Z:/
;>ZP:b=G=^:_9Y6KdRgZ0WHG+4X_PQ-d:E\5,g2E>g4d7JQ4TN1(C1Nb#J55MV:M
F^bZHMK:2VJ2S<[D2;2c2:A(9:O2A8P4VbBf_Y<1ASWLD^WPb./Kc+@2P-&88/WP
R\@UfgL,SXW<9C?c-)>)L@7IBV@K@KF&V_Wd:#\[HCTSL6:-cH6F>QJ,F??79U[2
d28g-a>XMT_W.VW7=]MF<:M^NUAM-OC#T#1XRPP64&:1AW5S(6BJ1E:KR0JOR8Xe
eR@&E3FN#/[I5=3/S#(?WBYFWX-30QBU#2\<4BE0L5;[+2b6D]d9<26fPM<^1aL+
>_NQd&>#DQ4e(:@dY=FQ:L1c_M)W.Be=e0B>bUP@2@[E=+/\4f:?618OQ_Fd</,2
g-XZ=DFC6\G_,L:@6gdK9b\7S3)D?DQS0SL5+6V(10]X1HJa4OMXRR)[UBdY<:UQ
B4BVK2?\](DV,VF]g>J#PA1e.S@04@7,4Z0a@RO9>Ic&>UK>3/D,0I)P&)RJE/)T
U\_4Vg@BGZaDYO+YZ2RL8,3+HTV-fAQ;:?+L,4)C2UD1BZcbg9d<EQNHX[>UW]D&
Q>ZNSDW]DIS#0EW^2Eb+WdY,f?b@470CC+G\UV[R,9X#XP#?ZgB(329#_Z0GQXbS
Z>50NIdLO^fAfbgBH,W#9Yb;Q51?f71)beX_>aIR_Y3.L(<J?R9C^)H7UL#RQ5C]
2c0?5>Z]X^7^G,,F]N6._LeGaB3=ADPRSA,Q6>NOX:Q[Og,ZX@Q<=PLeLI/G05HT
geE<)1)X\Q_E#6^[;IC+58>bVM5\FVXNA\aUH?U)O(6fBN:JS<0LZKYGf8JTc-=/
<U?]K,ScZ[G?E8RS]b7#?L,/#@3b3P&&3)9Kg;>AMRC6\6Df/2>T@C\0&OPR1EAe
Qg=2Va6H2Y&dZ(VCLU+@?W(V<-PSXf.>4HA1X5<#AcK[1\2#F[cc8?5ZF,Z(?0:.
]_D\@O9MaQZbFXeI;0K.4<D31AYS5M1/+=39BPT.X?09\Q_Qad78g8O:D,XLMO5/
>1I7(+.5OQ3;<XbMa]5.@=5CK]J^d4JQeUS?)RV3fOcYMHZ0LHe/.S(FYg3\:G&X
K/HG86IBB2dY@L.<?a];b6Y>cIP;>=4bH[DaagLg-9M#UM;ea=(9:BO:bECfQ#MC
=G+6MHX.H314PU@DgX/PfNO.C?^F5/^ML(8e\Z7=cK0NObG)fU+1.Q[Da&KU4d_g
\@b\XPE)H;6da##&PAWZa;U(H^58.XX96a18IbfR8-@Ff8ENVK(:-IO/D9_d)^4f
0]^@5c_035I4X=R:/I-8da+0b[fW]<A8NHP_#.(<H,C?gAGcb+MF@I__10^?.0QY
:R>_bgW6=.V6>++OC>#_P@>[52d=TcKb@Y#=X?G?]DZ&PeWXLH:VNeK=JFSM6/E0
[aa3HT::MW&/c:_@ec9,6VNg;[Hbf5Q@<I4_9FRWMQA>bdOI275Zb/M&271[c:b(
)<L#3+R_H.?W\GY,6/PJI(^ZFd+02EJ=aS<Xg->5R5>J^OI>5aU(2Y7F&e4VGI-P
?BBH0Ge;baN^VfN-b/9ca-CeTb(Q(@IO#HVE25eL]J^bY]0H8J1dO[&:V<Z4;ILS
:DXX?c53,b3?2d0MDQX;[6_<GDReW^caX[EOU9#),Z-X[V:&-9PRQ&]E4)&-_)_L
-Z&-b2C6_Hb??+,eVII4f()WLc_R.Vb>:EZ^JJKQGC)aUOX74^</d[SVUe=(Z.VY
aeagIT&@>c<GWOeZL5RcEa7C^.8/<Y7YW[gV)/fb?513^G1OIG;Jb=9J8eKbB#6X
O-.GTa#\8/J;&,,2W+b19Q<f7WCJ=ZFE0C[4.3];_0:#ELWb?gCXI8M27G/N<:.#
?658@4Y)(QGeAC/:d[Y2LHAQ;TV8bJf@NRH6;[dW&ZK8>K8_L\f:BRXPaUGa;bSa
aL(+L(M+:e?eCF2#7,JP5b:IReaA4fgV^EcB1e+aN4V(4L0F_WBI=Y(NL4((TWXB
,a[gH=&+LW5OW_VA4X:g@.#2W4/L1I\OY(HR6eRL3E0Nb5M70ccVJN4ffcQ_C:KP
39_BG,T?\g+70P\0I@(A6R-77#JXXHW[,^)F9c?ZaePMOCb/fI8<VN8[fg+>41(7
6)>Ad3Z8IRG1@cea7Pb0SH6&2Td946Q6=^VZ4M<TO/<fM8V/UHCc1c0NfGYHEgUJ
<A78b&4TGEAB#,6;V<^RCP]g>C+S1AIN9:U<6g_UCDTX0B66AQ:S,./:Z^4_.XW&
;M)VZbGa135>XU7UG^f.F,R1?ZeZ+4+@[5abP+5CGK6N;5DaDbT;I[(:ERfQ[eZ\
&7ZA+TEJ#7T0SD@VHD\XNUQHUS1?cde#J(81^A#;K-&HgXE1AL\GTE1LF(;_N[LX
,c>++&(b+&3VTRa@?^@4P.M]=MF/=M#VQ&D]T)31M:_a?SIg;NIGE3cROLUSMb+A
URI5-/Y0227:BEYG09d<-9CS1@EbFYJ@LG&.EOTgX#eEPE3/,YSTN@-/)#YT4bI;
-U6>7RI:I&g(>6MAB#]TDMZW.>QH/RQ:^cS62]dNTX++6UPXK8d6[c7#09;5ERL&
KJ/T<B&&HCQc.MAZgO2)/gR19P4-,d0)KT-3-]W5c.A4[LdS^0e:02gP2KXa+E#C
_VXZ)\b/&Q>(J#\>4E;5X,Rc5]3OSDV/>&BA.S7:+:GVR<Qe_eBd,0aVC[NY_Feg
[Y3]]A/D@UKV71^UBd_AH82L6H6+YN,R=7WL2XcYZHKW:dRP)L:Ta301J;MM-BBM
Of&UL&bKO)J5>@_Ab:0<QCC:DHR(?gD9eY@7Y2^[-T;1+Kg^g(^B[gWMP91/\+e.
,+]K([g;RgT[,5+<+GL/f?YTDMIFdb>Ia,;MVJ[])7^PgA@F;@6Y1Q\aOV5dE5(D
--QG;Qd:PWBWa&39,bc5(0PT]4]_R(:YF6096L9V;^K6V;7@/<>Lf;RUe?eP/fGM
S^77OU1BZKdJL1&.c=d?ISRSba,dgQQLR4OE<.Q/U,_;\f@V\A_2@e<RX8V&:gCS
:,6_C8a5L(fgUV]7Y5-4TOU5@(_WF[RX>-A_/EW@^RDUMP4K(b?]AZSZ#&<S+aI,
&c-;S;Q0091aH:D7VX:J8+AKf^+5JYY40,6:)EdV7S.gLGfa)aD_(0LBaW+N1=;C
WU,H@U8TgLX>fJP-G)EBL^_a&;2IYTJE&GPTH5K:=B-_2d]?Kg@-)C93/g-2PFQ>
?[-c4JXDETY(7:E7PEKE>EKaFP@YQ7f)MP.)1H:;WbY3NZ,A>45)W&5/5a1PH6P&
2]D)>CX69F]SQ3L<[MA-QXXA5)e7=<&)Kc3D13Lg8P:1B3ZGCQ0GX+5fcB+CWd_[
,9S\J6]VZ=5dQ3,N5O/3]0Y:.6c75256Hgg;?O1:,I<IHQ4MR]S#aS@R-LI.,]/P
7-&Y3XX[bKaQ0I?X:R#YS[5M^;eb.I;C5(T?V@/.dg7FZI>(G#;/-NM7e(cYdIZ5
[WKC.53ML+C\5L#_MQ+ASRceB6e.Y]>EZ8IDQ?]1M1J9VZR.DLO2IE8][RKK7JMF
F+0G\OKS?#I1[dME_<NS[;]g[VT3TEZde2]_Mg;9YGGK[\I,9dAM(bGML3RYW07#
\WdIZb1[cd11Kg.HMd+5SdKU_IKN;G>)O<0L6&VS<N279bIbFdFI7)TX4?BMd57W
U5fNSG#H1IdYg+)g-N&TRVYR8=6@+B;VfcROODT2;_+&M;TMbeWWG-]dX;SC^4:<
_@Q\A[CIY:<9+?;;S-UN7B/)O:=dR[SJ\:JEbR0;bG_8BQ/G7:@AM./#=-/B8I(S
2S[6-&A_,:(XE,GK1:VdHU^eX7W?X&Y,(S(d#WXJbC5;^EgB0ELH;AX;L(4\LEdd
Z1(g+e-YeOK]W;N[_bH@<#HDJ.H;C]Gg<SIQ:>;7@[8JUEIAOd^ObPP(L5137S^a
OAT[MTdH(ID2ZA^WaNgQ.:.=\]fHc5^c=d/M(@gZ)_AAg;YBQ+:#UXb?54BX.KG:
T(Y>e37/dF>@-AGND5W\VUI?<^1)5&9AbO+6P:X50XB9L8EFfZ[S3=0<b1C34R?X
>f]:.\bBD2;#_=K_J)E80HO2cbE;dg#1Z5DO(_D&-B1U;Dg(GRO9aDg\A\8?KSOC
K/R<AVS9-a9FT(YOSW2\Gg;+&5O_-4RK@e3X/aecY<3&^)_b8K[Ye.Da^]L#5.P_
49??@_T8RVZ76Uf#Hb(>V4:&WQ9QZN7NCNAOfY>0YDg3,#H>,KPK4KeC,E>f\b9S
g^TNaBZ1d^P>VA86BP1D#aNGTVF6Hd_#fWSW;2Ha)+Q?-2D)]O)8[O\P[:)1<DO9
d\8c9cK4B)]#S.&KXO:6:FaAS@c+c(TDLTO\7[/2HZUC7C#?WXXeH\/XT<d-XHY\
]N3e@eDGDRWWU,B495ST,\C;Y#.+<[ZBcFCcY98>>W[.bU(L6Y+J68c/RdH&SPB&
7d_?^VC[-=<NUDQ7E1+0/F)J[=)DcY/_2R[<82E6KK@@+?>Q35X)N?1>7N+,[5.B
-:.S0-<P>/-:cU_NV_ed##c<46EH2=64g;_L#]CV>c=8_dUTRL(C1-G9VS&_9=L+
:Ddc/5X.8EO/+f->/=&)\:We&dGOI<e7?\P<KP8C]CMF2Da^=C33QO\CPW7gUZK#
aZ2:Ec+P^QYIAc8)c?b72\?OaI?AF]R0(C]2IPUHZK6Ba1@_<XBK5c-P?>N/ZZWd
MWO/KA&;I9fO^_-WNF&?gG+(RXTa([X-Z9ga<T)LLb\[(_QXEEGMe-MM>P8CH,AS
IYR9UG/_#.NcNA+\QK8cC/38&D:_..^.W();)WVYK);e3PO;2FXQ14@4.Y?NAO7Y
(/+NeTe_bcUf5)46@+S-N=.I#K:J0B[I]:U#e12EgbJXS@B0a&UVGILCB7Y@/@eI
.Y429-A_L5EZ);cX@]=^&LCH\2TTSC[8)&-3>CNZ1JJB+G_.b3SO#2S3dDgP:.#c
&WIYX\ab&;.THT;2-W<E0/eK[8Y><_=Ra@VA0DGZgcg]aNRd+3_0\?<U3@BCNaO,
+(,M#(\@QDe2ME>2c)0#7e72.-FD_D5e.:-JR4EKg;>];)@@>=QSL0^[>L&dS/?H
8IQTGYBG)DCW\?F&a4AB+/KfD1@4OZfLU^@C+E.22E]>B3R?(-DCI7T_adaC>6fR
g,Z_,E#]<KB3<G(/+-8P)F]^WS==&)28P-g,-Wf86TC=KBCV_7C;;L1U,@GReYE)
a8<06?.^.COF@L<Z-?UdP=_<<]5C?Q:O1P?H)9Q@cVIFI]ZPY;73M4]HAV[4NILZ
d92XJFA/RXP,#1dS,4D0Pb_<6$
`endprotected


`protected
Ua4+3)7QcTDQIH^B4U01>M[.\bD#C7a\XcLB?BV4Jd8[0N435]=Z6)Ae0^.-WfS^
>Z@1T>ZLJ0\LEbJdQc>a>A6F<LP4YBEfd__eB_3>A5D2H=F1)-A4dT,aU>1?+RRR
C-KTM)5H9R3gF9WXYT-b(M_LX96O03WW>BS;&)JA0N93B4WZ5[4Y)f?4_F[SZVU=
..IO)0c+Q@Z10?#V;W+^=,\QeS)N-JX-9IP-4^D7M1bN[J[Zf:HZW\9U+gCHI^gF
KTJXDX5.S:(D#]f[D3Hg+Y\/\K-?Fb<X:KXP_FHA)4AG+]gV/(:gdfDQd2RFL^<F
@D6cV9O65+X<A_,RI6B(Z_/5+4(]#@CAZYI7JNJ/EMO:&K:Cd#,/Xe[OH2AdD?<V
4UY4)4.7J7=H7aT9;QScI>NDR6@#)OMBO6_NUc<ZcLBJ7)=XSZG]aA_)BU)cS-=G
AOSF7gCZO.]d3ZWN_8YVTT>8CfBd=@ZP1&e:&EFW/fa41EbU[5LE[OC-NFX8,fW\
E#/SM8E6_b@;H),VaJQ9LcIEeaGN(KZa[HRE=FDZW;=LIQ.ec#3SM8,1PVP\3>,5
Z+[R4V-WT@CH#.D\;fA_J7BGZG=6_89M>_S#NGd-FJ7I0A[(bE:0E(>&WeBYPb_B
#Jc[RD>54M@J8FL+a2LL2<3LO>_eV.AJ@A./PA&Ka/&G9I)_-E&),_@F2A5)d#@G
D30f<JgT6c5aJ:@5LACM1:OOGHf^S-<Ab74+4fFMgF4#Q^LE@QYeX1bgP=cLb+0K
HE,2Z4,W^UOS4SFX.Vf_[JBEF<P_d6aRf;^9\3N=](R\_<GHER@7F((VNDBOaGV[
56GAG@R^Z-]WF.:1Rb(^[^]9<f<,<ZeLG5]<S[]+e?<dQC7+9aDTdL4S2&CG05L5
<M;N\41XI#G>8(S;GRe.)dJKDZDZY/<E0\7A6&3E^:3\<P6;6f=#NA^81]3[#HeH
b/-P,?Q:ZM#d]?7aVHDRd@e[_:A#ZW445782E6MO=AVTM5))-_I5[&]<.\@^>@@.
;RF1[@XBJ3>=,/<L\]@;X_=9C&&MUcI\G([6D\_DRAb&5VY=CV]ME<#]E^>\bQ1C
[2FNeG75b(PGUJA9S]9XN+ECW3A8RBMa=1bb<,6]]#6X2UN.S.dN=QPGK2(+f92_
B_JKQ7)G_Vb^aOb:DS-^P1@^GC+]V15a_g;-E9d5XLdS;68)<_=C3_MR<Z^F/+7E
YOW5FeQK48]&E_^c;#9Fd<YV#]fNfB#73aYc/E-ZJAC-ba7[[;.2_4,)XE5fX,UL
Q]cgT\@>VASbDI/7_fP5NB0M<:;[AgX_,#Q]\b1DJBG]1N[&;EbS>4(P?AU?J1OJ
ONCS?TLba@-/;Bd+#><(NA69;8g:EEP=6//-\4S]2>C=dC2A-^ef3K/.Cg8T>&^:
2><,R;FW#.OS4DH>e5#BcJ]/2H&05/TX-EPRIgQ3ebAK0cV&\7OWPRT:&c#ePa?1
[5OfKR6-?7J_G-3#9g:@ZPf;#2B7=KO9HefcHcU=1,\e#B/O>;:AORLE3bX1D=XZ
JB>;RLN_:a1?N63365(4T[V<dJQEF9cC?[H?>P.ZPCNda;4g;GPV\Jc_@:F@=N&O
+(Eff#\>.;729d+/3)Tb257/HA.EO.Ma6FdBaYeXJKQOL]C\E(0f)2ZY0/aAK^<d
Gc3VE1JZTSIA+9):fIB6[^NS9CM0M_9\<OLdQ,GTE].A,d9O6g1;IDZ\\\bcA6:U
g(3X.;6aI,;,d3&EgT-LH+MJ:3_&U4R7J:;>7=@F>cKPgGGB^R,aKf[U_H:)F\=:
&aNbC0@Q2ZP>:8=#^0;M9>cF1I3,B_A^b@B4fbZ4Uc8Y880R5Za@)Ic8G:O=9G4D
eRI(RH>0=Gb[cDJG/_/bD\@L4Y7d;6@d=<KH6QF)?D2f3M:A.^H]@9@6+P7b&M17
5JQeVHQ7#gR3aTdPg6=S=LL;cCILQ^_a_[7TbI=<T61)QBKOed+[+K<C54B?RD\a
5F74>>f]DD0+>QIN&(f.cY>aASJMFX3#RNZ-,6Y<JIC3HfRJ3>JTNX2NV>F1Y7Lf
#J+cD-(eZ_;:1:73^-6;1=/M9#N^e[&B9=P9^BZR/+[d];0<&:EM9OQ/M8Le3]UC
HB@QSB+HP.AB@13=eE:.XY1>0S,S/[a]\#Y/9WQWE1PQF[O-UL=aEXKWMYbcO/1?
E_U0?,W3\,00A2GcAT+HEQZWAW[+LPO\&61FBI\S]ND<6KOWdITZ[@;e;CIedMK_
TT94L&IC)-f&.ZD/[eG#eQGa_XCV/,WC&dSdC_aAfbWc;AX5L1,T:=HEH8CS[USe
bPAGe+OE1HO;ZQ1Cc=5\=KDbYFE\dP_Neg6LAMgHMCHZ,aE\/.a.\#ZF_O[B&Q9,
gV4[M>@dVK[?S]b?J_G?_AKM,&O/K?_8Bg\P(6?f;@I(5Z(GTgF;f,/EP+3:98O5
-W9d^^KX&R:-1LZF/2^#9d<g8<N?[AP4VKRCe(M86)JcQ-<-1Q[-ab40QMV41L9,
a+0)9VDLR=&[ZJQT;GYX)#;QUU+FUfPQM#D@f)8OC_D7.YTK5?+H8G#36dQ#PcHR
4?_8MXaQ8dHFI_R=ABGAZ5IdI+JVZVHR9_(#&J^?@W\c55Y<e#a-,b4L5[C4W@&#
+@GW7d1U]f21gVUZ5cCZY6=6B^KZ_RF4U&:(CTJ:V3O0WFIW=(7Na:N35:3X(7RQ
=7ULe@C0(Y8.E8.BTYDJLM0GT+@JQ#Pa(T83G<Y6;E]g#[@0Y?J6+UW+SfeHQc<J
RJ5E>@KQ(RG\-&?:Nd7M(gT)BR#MNMK<M\HE;64C6/.YId&\QI5Z9I4&Vd/D7&X^
Y6.A>08D_+<5]CKY1^WJDFBV2He]^X#:Y?6F\7eUcbELYbDQ#/&;0S52C1Q/W02\
8ZaKG6/&&)V1+N9QPZJ?]L6X\@,5\T6P#7_=RcH0A0C0HLb6)IJ]POXX/K8[O^?0
GOdC2b@#[U)d+=N4S:(+7(e=RcG9MYQbb1dY]QbU22M#F(_<7g92bLP/JR>VI/_+
7]\VP@e8YHggDG4f-\6;3X,bYFO^4^.c8K3JfEVX.dM<1GK=NTW8I;1<2L(T-^e5
C6T<:?VU9F]8B1UaaBTD6T6)]V_(^6XPag/bN)ZYIggXT#+efJ?GXF.4U#O7H5VB
C>:b:f5O89dMVAa;@5R^a21Pc:>OA>L1.Z4eTU&_1&@TW0(H3HRf+W8-J&C(PM<f
241Z63edEZD;;e-0K:)06KNgI4]a@E)g1GR>aR<Ud729N=VL0eWLTG>V?MQCbHfg
,b^EFY:8?a>9Ib>BN\d#X6T:ZM&A+/N\];-IM]:K6fAe[ZM:1e=AG<0U#Y0FUH5H
^7\?=@?C[abgeBf]#2Q6b#@_)fH);U]Z.U+Z3Z)WYQS&CXaB?]F0fU6/TQeM[57[
=U@,bbTJ4L:BII7L^LPLH^=JXTe&TQ5A4X_1MZTJ9BEc@dEY)-;[dI_EDEPVKKQN
MaS>R\F2)Me57:]2.d\Z4&9b-:4d/\?38(:9]cK(6K4?/JI_=O5,;J(PYJI=FRCb
AbA9()KZZIH@V-4-_-g>[KEZLZ+T[aJD?S>M7;QY6#;2J64ALMEO\dX+g)EGe;)a
?15,VfA7Z4eBW#C/5(:P4@b](bV7=KP,2Q:TQc7#g5HZd[4,f@I0SXBPI(F]^QOY
#+6FZ+a1?<]F@(aAOF@B\1,;JMVE[fCP&I\\T<C@R[2c44bJfYK-K#UT<EONY>@Y
?<1//cXG=G?;8,H##Y51>BbENWF:GIb>ZI4g9PL\)bO8cUQH21\9_.+AbDCTF9BM
1R;OA6H[]cB((Og.\:/^+.RN@Q(TccIUG5/X3^N?QR)Yfa&eXE#+E34L;/2c#NZ/
#>[TcUR:dOY7D1:1(X,6/EK(dX.\ADGbdPRW(NNK6NF(WM0,)(YRC@=e7@[E;:4S
/7L,AE&_([6:;:=./AX-[c]Z3bDENF+X+MH(+D:-8\W9b21YA&3VaZLO8YcV_KIU
BbTN0&^B&S8/#/KZZ#Q0.b6K-L?\DT?&Uc,cdO2OV);A]GS-.-7GHAH69ObbQMg<
41f:#]T#8</GdSR98gM)U1HBd4DB-fQE)8YILJ5/#-3T<KQI2Q)R-6CbE@(@1[=L
G\>E&G4J2<X;K27.?3F8;Z6e/U]DER]gN3E1,G#LMPg&;N]c(DGcE2C<LLLNYbPF
.X)gL-&a49H4K&92L:QUY)D6S=f=SZH\=QVW6\?2WPJ-5&S(9.A6[gX6+cgQYGga
O@4],Gf]c:fBKR;2SVT?H<_TMNeaX6@e:^e<=KI8@4F,bFS<=HIc-NWY[CZe0AL+
Acb008,@Q5fI3;VFVL/DT_3?V\9A]S@DBN:)B[M;H]1FDO#5C)+7W>EO1WJQ0BMQ
A0-EU;;EQY5EH8)C7+DK<gb-M30SB;1b[;43/(GPNVf1)RIbT=XOK?QRF)L<Bff4
)ATR&4KI^UR;G<MAU?21BFXC32R@;>f)7/2E\ESQN#&QWY_@c/\\&JAGCL;GY+Ef
U2Ff/4gC7H?H:RS>>P;)9=fR6dUG[gVdCSbgK),YG[BB9Fa3<>QOUfD4Q0&?f)GI
<D_&1=OLg8R,]_EWT61#969>^<8[(\/JdFXX>BfQ>Fb\:WOc4^3?IAS?DId,A5<<
SZ05GUHHS@^,1P@;Z+,CSaG>5UL5L&[D[P9bCA/,fP=)@bPC;Ta>H1,;DA_7\\Ig
K?-1\dSDD:/dM\IWRWYIWe>UC9PZ6J/:V,=0ORfR97UG?FG3=N1IC&LT^/SL38\d
WS]DOYg[:X-dREN@&b#7NE^\TLND[9+/a,L#5B;Q?Sa3HA7+;7>V@STa>K;C-CJ&
UK+S@&,<THQC5/][Lc_5d^01^M,]0O+U:ZWdCDAX2;@#5>ROE1VL]7WV0&ROc[D<
EI2<:O#bIS2cUN48P\3U/E/Q1U3<<_ZY;K=1gP.#B]9;[aT9RQYGJ-)[NAE);[SB
Dc):W5Z.<[)#QRNZEP#&<fS/dMF4N[5724@IAUDcf4]#[VRS/NTLWe4H/OSBT5QY
]#AMBMCFe2].)7d3#6J<FH]5@5@fUb9a<RIg/&f51XZR4EC,)D=Z@-CBC[@>9EAR
SB6]3&<6J)Ac.#)A=8,[L+)de^O\7dMZe,>dU\/T)&/-eW>KE0);2PC.M9&IK5S]
1,e;[G(5#7XHbJ41WN@0A;D?23L_+GZ<,.NMYTH<[AfX2\2J]C&92>dXa+)V_J1]
=9.;Jb95]BcY3TWf;[G5^LWX/W_@dFKCK_&ATAQ)8,Gb?/?[,]=&>)^3gVR/,3PT
:,=PK-V#7L=IHe>dHV>X1&)D9S0-K._d/@948?e)bZB]84_B74/0Y3a,a2D2_;He
-]HA<#a1:2>>J5L<6(GSfbRV8Y-)NH1K\C6&F6E3@GJP(7^IGK+_H>4]<dH.?]K>
^DZQ1:[J,.G]?^DEL1C3V\aIT,PWEd5Hc[3&QGLP[cOWB#\dd-]1K.0+.Z;M^_]9
A&=VV@6RffP5Z4a[5B&>9e<.QbF>Q\T_;.E:D&Q43,3+[5\9G<)@\<GH0Q@(7b>:
5]6C#JW\.fJ,YcR-P<72R^H0,47PIDZ17YS7)Ta?QR5KTY_GQ(\,ZW#<VME)Dc)K
;#e^VCSZ_6;REYRRAQ0M28&ZTVE(]Na=gVF=+QP619ARXPJcN@-a6_[-.E2+:e>D
.PY:\A>6OP.YdBQUbWKGe_?7)RU^,ac<a(RW2^=B7?9L>W)[1N<CJ4=EO@<24QRK
>>\fVgE0R94:Yb?a(-;ZT&5^IR94UY(e-G6FWR#NP_[?H@ZZ+^+BNZE,.8f#4eE]
RP5,]4KHCdPAfAHRf:TfdRZ>.QNPAdUUM/JF#^I;RSF6=3cFHaaVMYE+Z=8<.195
d&5-#U#WXF#>SY\]7G<5914MgT8#0XRP=>:#Y,D8^.cUGa1SA(BW(K^@+?cP(=d,
G#-<HGAAUL>[M\M1NU@L\D5+X=S6ALIF[eKY)RA/<]95?.4f3:LOW+5ASUDXg@Y2
]c@Nd_JZ;1=eeH(MTNK^)TVHcgZ5(+eKIYT,[?:5+TN,/<:E+d(a,W2aW4a&9d_&
24Wg(1N<J(9G_;3#+23:G]<CRD[[FM>PVWgMH#P2B=G/,?079OWO@.)1JE_OUg\C
>0YRf??IBJ_fO=OV(J\.f19G)d8>J8]7Z2INXIA3F/e8(6=cZ5QVGMQF3DfMC/,N
(E\_@<#)APSE5FL.,#M0H<-OC\V?\A.VD;eGJ-eWKN,Q1CO=9/[@:?-M=aM&>M;J
Q-7=bDcHYbL;#_1X<[EV[F65S29f,_P:f#EM\1:DW(^3)fT3E0TEc=C?.#L89PT@
7H3^IJ=YBP+;5^)H,4HI2_O7^3,f&;6R?/#Q#[2B>d:O3Y]CYHYeQ-2[R>2KgQXM
1,L=)=H(>e:559>dV]Z;3B9)0>Q^#)c-I.K;bSFO^14>C?XOJbPG/-b0-\3J\IOR
#2PdV8YJbgX2^0W<[&K+Wg-SUX4;:2<NHV/)-M-H5)4KAHSc119(b91K38LBKXfJ
_0>8b<[Rc61N_PVO^3:&3?R/a):1>>H\5GIJNGe;cDRPLF&U+AF^2-)0gO9f3S=e
4-R]HCU?a<UO?+>+?8N+@W<<D@#E+++PIU=+<;J=\>R97.BaGaPe8SS@.+C4Z;-b
OfKc9Z9E>aC5^&\&C;C[2CBKQc&G1[(ZMNPd:]<CMCX9;V>[>WTbMDJ3(6W1URDU
B42f(:MQFRDLWLWNA8ec.#>;5.7W_&?dG-cLOG63.^?2aU)V5UE.K(Z/,TQ/g3X>
K=K_,C4Ged-WgOcd-A6K\Oe15V5X@V5PI(N=L-\>)KY@6T/&b.6F)?3N_MbMT228
0d^Y.JX7EZM[3U_c#[@FR8CG>I3,F52b(9eH4fH5TBQ],]//CR6;GZ@X:-]8#cbC
g&O-12gBS@?BCA=W=\YOa#8>9#H<1gWNG_R?-\=eJ(2OETg]4R>5]G:&T_@Ofc<f
56R,g.ANPfe\TZ#^P1FHHdf#;\Z-U86D3N^\>L&ZBY5X&@2d^:W\bQLYYU(:Q>TZ
=95N[/W07F;J?DOW_;X;^53<:ZGWB<Tc[)M7@=:]A7[,&__0I;&2@:W5P;NX7]0:
@)Vf1S3Ug<PcN39U_WSf5U4^f\-N2V<+CEKLCL]72b4JE2R#YPg2?#Pac/W:J:ON
]>dRX=RT([Pc)>A/+BOd0?;<Te3;gCP8^bU=1^-;.U;>956a(MN@Z@NUE,OCd,I1
TLJAGOSMN=aIT&IIX,79<G5FZ?GY-J7ICBa^WfWfQX@b/2e7KGCQ:[NUO$
`endprotected


module _USBAnalyzer #(parameter DEVICE_ADDR=`DEVICE_ADDR, DATA_ENDP=`DATA_ENDP,
                                ADDR_ENDP=`ADDR_ENDP) (
    USBWires wires,
    input logic clock, reset_n,
    output debug_pkt_t debug_pkt_ext);

  default clocking cb_main @(posedge clock); endclocking

  `protected
0JQ?SFSGHM_X010E^=-8(U3HU7eB6?BZ@;7a^?6Kd6IS)2#2GaBV))-Z\#A^30.(
3/5(I52^5X.CXY-](([/9,:[&&/,[^M#Y[#DTD_:LdI#P]MJX6]7+:6UT7(-gVN;
)<G3.bU_L3.I&6JX+R<RN>]U??60A&I/cOVQGgaUbO#1WOdg#FZ=1HcJY..4CRQb
38caW-&<K_fO>MVb_>],_E?9CAN;21M#A8QC[.HVI(NJQ(QX@,IZA5MfXS=,I-Mg
3AK+.NAJO,33__\J@2aFSc9=3^7S-Z0WLNB37cMYKeQ&agLTO\S/)23g52/:P.Wa
8J7cO9Bf-SD7PJ6RT9]Sa,A@>5:.d#]ITA>G@5P[b/_UJIU1N)/ETX(]\9[2J5ZP
4NU-W]0S=M;=7@@[Y7)cD@S3U)6cLX(ASZJcEEecHKTQI(D59,D8WW,M4>?cHNf:
SE4?T+KG#R=:0c0]8)J-N,Ig4LeWB58)3dCC+DFIX(J.S[Q+R,U=.XIMQ<G7F_=N
M);W:KL&[QfA@[L]f&76e++e\6^Kdge)@3(L\C-cW@283+a)^G=/EW)6[N@RYO2a
-?1[@dc-FBW_KO9I=7?T5N&).Xfac3:?K72W;+QeF<=);aW3L?fDTR3-TP=[4.[)
9d&VMD,A,c9H)84?KFIMG0Vf?#B\KBD[eOU\0dJcBagQ4:K4YBRVZO\;V?V95/VH
^J7&DGW;6]F&O6#D43#W&[3H2;6LfWO./-P-/X[YXK7>5S+e=afLfHV_NW>3A];@
U+aU[M?cd.Q@c]X=KG0Z=3&2UIZGEN,3O<J7AM27dE5@dU[ORRV8Pd_]01e)E5eE
@0]fWA-a;d8?^@OI4H[V.N1W>K^#@<5MRQXM45b/@IK&PFSXU1CNgBYYXD9A.&&2
=MV:We/35BLDB(.eZ/_C.]G2LA&fYHgK.M^O\HLH]4#D2CXL2=.7?Ke_Ke8>M<YR
X5VT5V^]E7dY&GD7KW@CdBE=Tbg><I,\6D,a0G#Hb)#^ca^OS-_):c[=94\Y3_HV
4M<Sf>@bM&BIa]U6RV:8SOTUNL?TS-;#QfC#)HB)Ea@;-/aedCc#D\daY<Zd<SJ2
a2f=J&O&Ed8FeFF#)EXa1Y1_7aP?L^^5Y<Q&&?UTfERS52[F73aU3@D@M.>?EU,D
;edI8::O+(U<K?H(egS\I38BdQ&2fJ-=BJUaSY0FR7fE/g+J8I<6OLKKd::0]&:U
-I)?,4K_6S;O;MbEW;IIX@gQ9FK^M,#DdDUDEZ3X@IVPg#[\eLDDHYd3KXX#ISP#
;E5N=A/DZ:cI;]T8[=W4FK,@N8B&0#W6;$
`endprotected


  function string fn_encode_bus(usb_bus_t usb_buses[]);
    string encoded;
    string temp;

    encoded = "";
    temp = "";

    foreach (usb_buses[i]) begin
      unique case (usb_buses[i])
        USB_J: temp = "J";
        USB_K: temp = "K";
        USB_SE0: temp = "0";
        USB_SE1: temp = "1";
      endcase

      encoded = {encoded, temp};
    end
    return encoded;
  endfunction

  usb_bus_t current_bus;
  assign current_bus = usb_bus_t'({wires.DP, wires.DM});

  `protected
KYaKEHeX<=ZO=S=\06K-,>,8F9X3,b475T,OeH3TII<URDF)&V)7))8dH7FG+<\J
.,&c^_W^9/U\g2V)N97M<7J.]TfF/<XX[](NP:E#\38CV1:L&@L.,\<T+AF9C,_f
(].Q;F4YcDF3WYND3T]19a(_E-6DB\GN(MEd?fCd-;agQ>d\N&2K/CQ(?F()6C17
N_Qg36I[^+<R\GDAfQ/[aE0QS\FfNJZdT7eX2?_L+8^.IUH=ST1Sg//EBg-V9UUH
&:0)ZP(aa5TH9R.YLI01OJ<6,-DYfHOI7a=8--,S[X[)N:@T9ZAUDH4#U,7P95fQ
4779G6+_&Q0MRJDRI0aDYgb8JKb;Y1#-8^QMb_4V<gMKeQ+?/FfN480OB7QdL/5]
LbEMCe90^8bC=YI0)6-eW#&J3,]>dOY#L(.W]K3#BG5-GAOAHGX/V(&(T;U>20OL
+.R]-Y.82>7AZ;0=]8aHgO849V@[>O#//Y60@fWPd<8:Z;>0M2)R6WdQXH09-@Qd
I;VB3NYXVA0a>563Z0VYC:.eY8C/cC331-A@:4/[=HX(91,JR3MZ4/c&I+10;_DV
32V0TJJA8_+,cfePMgI6KF9a[@38P?PL5L?VMY00NF?PaL5>B/bcFf9O0B=[7bQ?
d(fSAS#Y.d>>gL8LJ.JBX>fU7Z,KR;5=Pf+f/4Y)1)d(Z1)M[e=1^75_Y[Gf-AW3
HQ,\dfUT)+A1ZN_9<NE[Zb9L&eX^]FBG]8(BC)F;2WIMF979\P<VBb@Qd#5>F[UI
Ie4Ae0LGVe4UabT&OG&=>g[_>a]@^X[NSXLf)1)#<6ce=HZgE?Tc_&V9&OGCV@dS
VYLYgOK<&b8E94fe_KN=3e4^ad3<BQ0J]MU6B2^T+R0ce.bgB@7^d[6:^N;=>L81
=TJ#:_6SM60;fFY70N&9bf>B7X4[E2CA)9:_eR.M8_<D2Fc4S9MKLb5[0CRf(UUC
<T6]OBf86d4X5CP=2cc::]be^JX3QAF_K7MXP]d)=Mf>1LOX[BGOF[UYD9Z3e_><
BD-8bP9>D/>>ME<C8<8E8,/PdX#KR8\cHeM=>CT:RaKLRdNfL5<AX^:@>1UP0UgB
A[+GR7IaORe1f8^GdYD&O@0CXcC[<_JQU60(^\Kb^YaRB2Ma==NXCaPM[JceX>:=
416\;EH@>XNF#7,6(^FZ/EDbO0B#,bQ-2EO0[+eR5cR.&W#LQ\gZ[G0JDLe.bI+7
AXZ5e)>+7@S83(MUaE#bKSOU1d@JcHQWT4fB#d=g(bcV.)O@E-5cT.GaX6bW,E-)
SPE+[?Q<(4/5b2:0NfH9WGK/-GEEe25+O]#A0N3C6OA59I?E+1=857==b:_QJd/,
:4N&eTVfQ2A]EbE5MOUW,WaLBY@@fX]bDTKFdLF^)X>()SQXJd5B250?aI07)9;H
]Z_BX5_;+H=RE&b5b?[eb&0?8b8>L8EE8)+/5d^18;9DQ>CP\RFV?ZFN48EE+9(M
e<NeGW,.=N@I>D@G-NaB)LZVfOPM7XT60B1_Kc.^B9<-#WL#8:PM8WL@^9H68JP>
TTT5^HQ,,&45YN+.3d:E-_b+d>:I<<8H0/4EV;=5O,MfN&(O--#N418R:g3I3_&1
HgA]W[IMW.?aVa+7ZPB;8YZc+\I^AQQ,)6f7bDCJ9)=]HKBgK(O^R&#/a0=?SK)U
TKaN+)9EX0B6O1C3WG./?#S/Jfd,OVX&?LNL:0.PLB8LRH<[@0EQ7V;KD-.E9,QG
F/EL+PC_O:]5V@aeGfI>ZfHP0>T^R>GX\55c6dIL<@WM9U+\RO^3bQ>Y;_VQX2@I
4/Y/<R37OVP=MTb7?XBHON+DC;9_Z4\VaEf.W,?:RO1^+AGW_/F1&0A7HeG6EF2&
+b6^0IN^T5FIY709WR+\Q;IU0G=(I-J+S<4=GW/&VbRHDeMea9<1YfW[DL5fEC@V
<VbL^+FO:H<\f?e<Y@UB_e[(VBF:U[0?H948BW&]fg<fV[Wd3:PWY3M;DXfY:B5]
7Y/cPe[S+G3<6XCGC-_&bV(0-X+?bb\]gCaS0NLgXO2B;JPO3e95M)gSBb:7-@V5
[:>VQ:202:O.M41bRH6f,NTEEg0<+P@/:3DAU^PdK)9?&5X][FW9bZ]I=?-JU5fK
..d_-JS7@T59c@MX;6HS@A_&8QOTO-ZM-J>U.YRPQ:=OBA<g\;f&E>bS\gE[#?WM
fVTPW3G/L/VKUHGV6eH@^Y9d#/[b0]f5XP0M8O).,]d^:NH:=ZKGWc0TO?2BD+5@
Q&d6>JbdXQ)WRO(44b[U,9)R@Gg\cX&TS(R-OX53T\[&>PJ_G/1;LYFYQ5K&LEcQ
<7EWTbT(A_;WH7a&-36R;?KYM&0S]Ie]9X4IITNA1-V_D_/9D;\94Pf?EAOA^GeP
Ha,&C_6JSVeXCDHL[=Y3g+bg,4W1EVeb;e?0G0H01<G>,9dZ)b54&4VD.7]LQRG6
][2-)\M;9d\?4+aQeg2AG^^G8X0J_95NKH&&W9Cb1B9]G[38H9ND(4=,fe43R=RM
;=0Y#OU2=08F6fA(U)?_@>RK>(>QbP@72&&M=VW-OV2\DUg((0#[P[S,L8JWXQ21
FTH]Y:d=N^#X\CMS=:ZgESWL.+=P\;C:=II+IKLYG51H?8AgQG))PO\WOYEdC\3Q
ad31aK0/?6M7M,@]OBH@I>OVd-ST06)A)<.#=V6-7RVM&f=XGP:2<A+)7EC2=KWa
WG@/V8]SY,B,U/^D:W3Jg;O0V+@TUCW^d?;d?/V+cRddX.T1X-ABVb5)NPN<b#TV
W:QHJRI#+ED#RFC)2QdEYS\9Z>7E<;4(eW36ECb\\;BHI4,8<6=(>5W6FW61#BcG
#gf4RL(GKP><:OQfaff]#gbH@F&)V];PeLATgd2,\[#;VITQUKfU&eO-3D-=<Ie#
_YXD-:Hf^=.7:+UIEVH3&^N7Ad5;>YQe)-<^Q=acb[#b8MQNRDF?0BXMP-20);<X
23WK;aE59)<dRf8R?;(T)dYa&]cG/4XZ-P&cBabNY2fUZe-T75M+KFYV2[V7H4E#
X1CcW.&RZg-8.VLRK_Gg2S=04MgB(TIQS(A[6g1\GU&/(5d3]&/5;YU9WgcKY&]V
=]a,ScV<)?Qe\Q@T6DM,1,c904ZZeF3EUOc\<AI88[g:Sc?_ME9Q)^^D.H>&A/3[
<g0^,85@((5&US;W([[<3\:Ae;T(d=ZXe^.b(LV#N^ZXR<XY8P=#QI\_>f)ZR,GT
4]O]Ud:EeS1Z9_&<@4?2e;F?5+]PFg90?d>.U9.[-,I(<WAUYU9gD9.M1&BO2UUa
F^,;SZ(?deKP.)Ya<3CLN@X8)VF\cC28TZeM8CB8PLLVVL:UW[;ab#e4M,6/LZc#
I90afgGKS<85-=bS5X^^0d+/^0+(NTTBSQT94]-5N@c3=bX6TL<55;;@YHT0e>>.
>N9Ye^7]:C?1f+NFMR72=HSTL2/\+J-_;X>SW@71;/P<\2J^bZ=e^L48/7HD(XgJ
J8M_M&GUQeUFd<Ra@+K,7D6YPUScI9VPN(@g@LcQIK^8cOa;eaBaXdV[5AQG7cY)
^K]X+W2Ed]O;5BBPS1?CT>Wa0;FcPYT);TJZa3G&YVWa/Z^8f5<eHDIYd&3DgPD<
T.K1SGfITF-YS;]GB5/I&:NZ(Y[I#NgX1aG+dF?U#e@L[PQKaIZ>JT3S+VeQ,H1]
C@eI7J<XS2WJ<WJ92H&;5L3Jb=XdZVVK=C9Y\4ZFZVN^MMe52D3PN+?]LfeH#Z(g
23V.IBSQaCZZP8Q#Z<.VPI-=UQ)-3V6FgS_RKQZ)[_^LMAFL:GCUQDH-b(M\7\K,
JF:)G3_;N&b)cZM],]bF02F:W#5RFY]+c4dH<dc62\4JaPPY-fA1XYHSVCOZP9PX
)/+X;(Q\L)S?e;XAI;6_3].Wd8LLE(Q&2._^@S=\PV/:.>7\)(C/&5V+f#GZ8^C_
U.CK3MUaSI3C@C11YAPd-]2Da+BY77-B:#:7G0L[@:a;O;,I)]L?YWaOM4;Y<27N
aHGO[:NX=IUX8aCRJ6_AA\4RF(971MOPQbN6X=B9+G5.=-aL_F1X@\]X7GEN#N,e
UaJQYEO\4,c?.4K?1JHS0\#Vbb#D?O8aN06W[Qc9?=IE,W+<FR\?;dI@FP<SQef/
^8;SZ6<.dCDS]Ie[BWU1@afVTZ=fJV^X(cP(>R-/.:55P@#V68/ADU=^_=PUUg48
1b&/=V-?Q7[?^CDWZ?D3DHTc+f1+a(]CcEd2?Y\C(?B&X&P-(FAO\=a_.<XV.C=3
GEeQN-A8JYf8:F^]=4Q_D2.=E6gKUJD3^_?(&==T:X[CY0(O@62P;0-QNfK4QJ=<
=#N=U0/,1;5@.<gKd(>EI\H5ZE]>b/-c)::-]T[6U_1#UCP\JWOP[O[H//dOaRg(
QDO=6f)=982VG?S-[>1bTPNG=8</W,]^J_YX=[dA5;=92K1gS1Q=H/]a9-+3D<X#
Vg_7)3&=\P&^\1c#g12EL+@f-62fT&,SS;Z\0)JIR>52H7>X-CCYTc<5_R7DgKY@
WM84;85KB9P;[>#P^XAfM9QV,2QK8Q92=:EI-7Vf<AY5F0<D^FK=T20]BT6;G,-f
&?-BNK-8(f&IIQ3e]-(RaK&\HM\5+-_LGQ:GXMg-GF:\KBK^8Xg3XOF?P)JO/L,+
gZ_9C.g8)Q=?3/:dOL\R:>J40A/VFYeLfKBC:#L7;1a0>JGH4KD6;E<Z<,;;&&K?
:;.(7AU\9P]W,#5I41=OQ/FQ/E[2/TO@INcXMR./.?F\ecbO2[aP:GFG&H/7,7A9
0BG\.AFF8QWZ_?,9YTLN>LbF);86)NUfT?.Y@UFKPg,<)4(H[0SC>2\0Af3FKTPV
4Z>#g6;2KM;BMS=VGf>=>C#f1AY.AT6/L7Y<DME6WW38F]8c:6PcD@?2LD))C.M8
F/GNacY?SF=[f.baWOYgV-Hg,)UYSU-1[]Rc)Y6C@RFN_]C:a101EGg+VQNFD3HI
D6E]<,Pa?-@<9SUL8Z4.@R,Fa07E/_]V(\2[2g/@YHVOWf++@3d:>ef50L\8?)HT
5/Q0X&aW8eTL&^@&Va4DVVT-0?M:_J@a.ZcB7&^1-(9BGUZgeR.696cN#]BAB9#]
@O-cQ>c06=IJM9CaBcQ;9;Vb5JUFLDXeD8)[_H]Qg@9RBRMHGWOZ;eH=a]<UB[3.
GIWHbWdWX0]9CR3#K&A=>[C<<F0-85(UdY+V&Oe[_&0-ZT1VK>c<-VKTa7JCQ.d\
c&;RV5PVaK<XeBO=4a0&_UD/PCH]TZ0C=OEc4X>X9&C2?:[V7ga669CT9+6A#KZ4
]4KL64fHD;A(M+F^)^d^C-(8BWc?[#4RK<V]8M#R5.G/KNMaX3<QW>B[+F(G?79H
W-=S_]ZLHMO2OFD=J&IbED5A5,Y>=YKbX,0aE0>#A]Ga.Z(^-7Tc7KIJ_d\Q(Zb1
(P3.[4f]QU.#501e>fP\^#H?_[TXIO)>PSNN-X>#8FW#X;4UceW3>&>-6]B1RNb.
_]PX;=QI+6XGG9;:,]aJF55\UCI:;4+N=O]IgEI0DCb(1(K^JaZ2bA6J-]2c/AT)
>.>a>]V=P+PRG,EG#:_gUgBTNNR[dPgV39F/IA,-2d5288O,-V.(1VRMd3e:ZVE5
X92RLJF1,J1);;(8S+I>YBM6]-)O[E219.S8eWI8_Y\VbE9?La-Ifea8c3=UF56E
KBP?,L[U610M.;QUZX5VAG986;IE9YTQ&JR>7fW5\ZKd2[gg?L9cVJFZcHfGL-0T
@(\_NJXP:ENZE3KGJBd-Y-def_ZeM=O5QCF-e//4+XfYTKPU#fXD::A0TDdB,,@a
aeN,V#F^TXAE^@]LC_A0WI@dH&7ZP;Gd5J@<HVW5aZS,F[UGP#1#f+PPB)bS^;E>
?NRU;aeI+8Gg>c^d/Z\U7[U1Y.0JUgV>2)IJ>-4HD=Z6_]e\LKYQSH)e_XG/X:+R
714DPGdD.(QXEc)U1PeW\LDd,cUWZ?,30g4+I\4c:RBLa55F6R?IU^VIeB\5.8[1
,F^4)d#D8]WY3H[A/SAH8I6O6>.3>D;-A,(EFYJ?YW+G=KZ9e(dDIEEZ?8L.e&+D
P2W9^4X<aA>1HWSP&fUFVY(4(D.gDI()#<e>^Y2G><C53]NMQ:.)_HMJ?#H,C,Q3
@8V6bFWdN-;-R6.8HQZ^.f_<;e9R?c\9S2a,g9H9<IE,-](4feJQ24;2+e/9,-IO
RUQTP.KL9EEg)+D,DY01ELSY\,:Kg&\8E_WLT4U5a7B&IdV)d-a8e.@WZ28aZYe_
F9UQJ\@MR;-Q+#CEUbAF684_LX^-cMc(R>(2g\Q:2)KJ4gFCE9&023abYD-?@L/]
B/@CSV2:]de+a-Ub[<^./f;CI_48^YEO#X;^e@>SFP#gXS9+@7+11;GFgYOZdFAY
-EgR_97NOV4DSGfMNK,+gK3BC3(LX3:,V/V?RAcM>+9,T2MeZ7_3<E+b&?e=VL<T
QIHBDd&>b1gA/\Z4a3F;SCeIR]d?<Y=BgZK95.Kb.?F=U^Q_82387HeVb&:NMGV,
<07SODb#W+4N\g_)/U13c\=&?OC..T^>EOfHE+UCT1QT2EcI@M5;)KA\=)e0=)(&
@J_7#_X_IHQ&J[70^;c6]I##ATc+T^1U=@)03e_?TZ_-AO1/3f9-DcdA-^F9SFa;
K=cdZCFe:36E9\+eSSR^eOR^2GaT6a.ND-K_A)<+H(NT?&</LNa_e&Vg(AN_R6JD
R2403UQ=]Hf5@#c?9>80g8OYXS=d.Q2aKa:A5\d]86GT?<OK>K#ZF8d,DS.LaETJ
A8:9Q:0S5_gF5,TN<5SNO-WNfIQK?#GZ,)+?D?231X#D>?1D_Wd&QP,eIRZdUOGf
)X9=.<\D&Yc]^1AA,be]K2]Q#Le5\36-:XXSde?Aa4#UY+CUB[ZUD>_.E\ffaWAZ
);2<,#Z1T77Q>O+gRK2C+J?>Ma?_COGRV)c]/X\OY,IZ?Rbd75X8eRS\Z1DVBE(R
YLJB>&Y8X4V(9-GK=(eX5Se4Z7_b_dI]O3&GMW^ZNHJ5d-FO#URD&MSY@?d:1\PX
BZ#:;<L8^,[N,[N9:62@WQSf5IGLB[V+EHBT18,gF,f,Z-+f5JWTPSCUd<BBQOK(
^d7-dg1H/_:U9+DGbRP:2L8@;]19+G8S[^_&K8P)ggIQW&Y3]ZdEZ?R^.9c6@P]d
#G32Ce0Yf:A?BcgXT2-N<Z5=JfbF2V5THc1CPF,T(,S5CX2\[eAf_,Q?#;HS/2)4
JReL:40KP49@.UWH]DdE2IC/d9ZXU]P9dW[c5T&#:978Xf^V]4?5fGDH3I/LbHIe
V2&1,B=.JSM.)](;R162JeC@8[4f>W=+;AT@S^2X>fENHN(?AeZ5W8RSLXHA+:^g
)(;>5ZP7f(Daa9[CJXJB+^LEcc)&91]=O.1J+K0e.\05>F#X:<[=e[TIFB8/^f?.
b2-2Ode[J>dCH?,\be+88<Gg2RZdCQa#1/f-B.#&;DY:V;:))S2eg,9UHNO_U->a
b]BS2R7/Lce)6OP3.CaP9<J<&2,S8d&bJRa2.I+2;&VM4#^H_BX1[RK/G=^Zg@cg
J5#dCYXW,4FO\1TND-#HS:91.\2[#HMFNATSGfAcB.8G\;;+.QCG0I3_/?dAf+5O
14>0_fAR9eL]J(/O@U.:8bE)1AF3KfU)\)?.#1)@cA3C[:dgMOTZJ#BK(03XT]I(
]a:MX7S:<6+cO@cS3?f+&5?;f==K/=X]^NB+_9KXT_cD+&T[A@4/WDUJHA6,gJI:
-\EFRGfJ((c7fPL@NXgIB/HMZEANBLQXf4.]VC[E_:GHX;B/-fU\<9c53eCgJ-1d
[0H.#V+<YE<G9ILM&VKJLV_0QIS7,>/HM8XWZ.V@BfX8ScP(Nf+/.2TX?g?=NIbD
RP84QW[/77Y;Kb]<IYA^YMMT2N^UZe(3ae4+S2,_MCE2#(c-OWZc[e[^bL[5,-@=
D:OWWFF_NPIYZAP3+I/5fb,bCGZ7R7N(8dI2X-=E-LM92b:b)RTCba/R\BKEQF[6
V5,6WLdeJJBT4>4>B[=#()6(ERegQI-B3^7:EQ)MLbR9Lc4Z9V5SJFJL7\>2e(RW
LPHBN(7#7<CW:-CDdc3Jdeg+3c>L&5X42EG-V>,-c>c4@,aRDJ3XB]]?],@(P6NX
KE.=d_>\^HVLC#(A3O2DQYEXX9c.UgN]Q>Q]<dRB&d;f5Dc5P[Ebb5H63)_aQ<C^
RH.R.-a(GF8^:73ggKSTMI^QV<60Z#>I\D;a0BUd=QEN(4B@CXE5:)W@f_:39AWW
\>dOEMEXARQOJSQcO1D@[1G,46e))c3)-K@C54TV:.d7V8,e<7>_[Ff/H8;Ac>Zb
@Y=@c_&0FZKaWcd8:;0[-N/LR@(=3aTF60TP;@Wd8.CbP2gL5;RMM?S;afVK9S&D
J[L:X[CN1NA@YM7bE0+@g6I4:(Ye,7E#8b776CTXMSY?J>F;J[<,2(,BH\:7I+_@
MZV3@T9ZcN>B2B72M:?\f&R_W-IZFfW&NX0SXJ2TC]3gaEJDRHg6-XOdc7e3-<D7
[2C152aW61I;AVA@Q)O.&+J(eAAeG9LIcIO82GI&&)c(JG>a-\1N,+8D&6#C84da
^D?#6K.OX5/ffCPNgcVF(\A2_T:Qa\>YU]_?J9G76:<W6@VEV:b\NEIXLJ4/1,dW
Sd3)6YRR>-JaZ3.NM&>FX>.5G()f@(HP=c\V3f_10LLQOP5d8b#>cgO\_=aJFg/.
b3TBE28bf,YJ<-M(f<K##/VGYO@.X3JBfd-^5@FUESMK)[Y9ZQW(abfI-1>ZGb4C
XN7N(VXfe2B[?6UOD2WI#S2&<IX4Ec)@]4JVFNcSH6]K,5b56MFZZa+9+SMe<>MJ
>b5O@5C@R#TY..g0@eU.)bICL6HOX:ea?:]DLXc<<GdKA^JRQC-[7W6X.gf<YPdH
fFF[E]9/7A)RHLZX31?-#MA],PfMKS8[ZV):86IC<Q.FF>LC6A>BGc>SIT9HJ()^
^7Mg&L^&)2aOSY2C]<ASO9[BNH:;gS.F.&6\1R0[I0D.8cQ@B1ATQKXS2S/NdL_E
.9aed]U2@=6>6;gJGLGFN[AA5S5W09eWS7-U-RY\.@K@=7+[FYG-S?&TcN7=DGF;
Z];Xg)]:P^HBVeW@M:#8e@&@Uf=-HFb+&N?A:L^K38^F//PgMUd_gV8V82-0a&aa
MS)G)#RP5bM:U6G7T<<OZB5Q6&\FH=OJL0-aFP4CeYF,#Q5e=A=+F)>#LE^OVE]U
]>G2/.>5E(4>FZX_+.]XGc;Zf5+V/.C=FK@Q\2N##>P\d_c-Y^5@+T)YS/=.S4O.
?);SL],585:&gg60K^X\FDT/_>5,a)=);bH>LU8.D.#++WAG7YH:#EIME.J7SB&O
]PRU-U]0&3KAag[A?GbAKcN2S-F)VZ0C+I3,;cSD]GbG)G<>_2RDF+YM3B-;ST6J
H5<QfQ6aGIIKT<eMD[ZaA@()#34B51#ZKCL3+LVV8KGU,.8992F.Z2[4P1?e>]_T
03b@U=1>1:2AXO6YTRc=_OR[WD.@9F;aY(J@R9Z4XL8QR=ZEcL4V#E&7^;E&>FH)
9bL/Kg#MU-^;H#&[N5LTQf#7S#eE+/_B(EfZ+L/UCQY#3XOJg#QaN40aL>TEY?WB
WIaO1Aa.EGGL.K80DZ>[(?FgaJA+E:&TI_7KgU<MUD=aWKV>Bbf37LB^_efDLNXR
^2;NL()Ke8^-;:D^DSEM=a)?bDT1OZ21ORZcVC];F\gFaZX=HUKI-0YTG5<&<EE5
@R_+E8FedRfC9^KS#UQMIB4JVU+WJ7.b6,W1A1#&MPbQ-_9-VO,6aKc?J8(\WcQ0
R/DDG+aJ9dS_&@e[bB58g6/#13Vb?P;6CY\S,P.#12;B4/ZBeF/OE])IWT9T)9=H
1G,;Df9EKb:IG-[_KMVU=Kda;N;;EK#TNL6_\IYP,bM6ZTF[fG4BX<13&,^N3.7C
<Zf069/I>ga]+B]c^5.7VdS4E)3c9A38239cC04F(556B$
`endprotected


  /*--------------------------------------------------------------------------
   * Concurrent Assertions for USB Protocol
   *--------------------------------------------------------------------------*/
  chk_valid_bus: assert property (
    disable iff (~reset_n)

    `TRUE |-> current_bus inside {valid_usb_buses}
  ) else begin
    $error("!!! %m: USB analyzer detected invalid bus state DP=%b DM=%b",
           wires.DP, wires.DM);
  end

  chk_stuffing: assert property (
    disable iff (~reset_n)

    (en_stuff & serial_raw) [*6] |=>
      ~serial_raw
  ) else $error("!!! %m: USB analyzer did not detect stuffed bit");

  chk_sync: assert property (
    disable iff (~reset_n)

    $rose(ld_sync) |-> ##(`SYNC_BITS)
      debug_pkt.sync == `SYNC
  ) else begin
    $fatal("!!! %m: USB analyzer detected invalid SYNC %b", debug_pkt.sync);
  end

  chk_pid: assert property (
    disable iff (~reset_n)

    $rose(ld_pid) |-> ##(`PID_BITS)
      debug_pkt.pid inside {valid_pids}
  ) else begin
    $error("!!! %m: USB analyzer detected invalid PID %b", debug_pkt.pid);
  end

  chk_pid_n: assert property (
    disable iff (~reset_n)

    $rose(ld_pid_n) |-> ##(`PID_BITS)
      debug_pkt.pid_n == ~debug_pkt.pid
  ) else begin
    $error("!!! %m: USB analyzer detected invalid PID %b PID_N %b",
           debug_pkt.pid, debug_pkt.pid_n);
  end

  chk_addr: assert property (
    disable iff (~reset_n)

    $rose(ld_addr) |-> ##(`ADDR_BITS)
      debug_pkt.addr == `DEVICE_ADDR
  ) else begin
    $error({"!!! %m: USB analyzer detected token packet with invalid device ",
            "address %0d"},
           debug_pkt.addr);
  end

  chk_crc5: assert property (
    disable iff (~reset_n)

    $rose(ld_crc5) ##1 $fell(ld_crc5) [->1] |->
      debug_pkt.crc5 == fn_crc5_nr(debug_pkt)
  ) else begin
    $error({"!!! %m: USB analyzer detected token packet with invalid CRC5 %h ",
            "(correct %h)"},
           debug_pkt.crc5, fn_crc5_nr(debug_pkt));
  end

  chk_crc16: assert property (
    disable iff (~reset_n)

    $rose(ld_crc16) ##1 $fell(ld_crc16) [->1] |->
      debug_pkt.crc16 == fn_crc16_nr(debug_pkt)
  ) else begin
    $error({"!!! %m: USB analyzer detected data packet with invalid CRC16 %h ",
            "(correct %h)"},
           debug_pkt.crc16, fn_crc16_nr(debug_pkt));
  end

  chk_eop_bus: assert property (
    disable iff (~reset_n)

    $rose(chk_eop) |->
      current_bus == USB_SE0 ##1
      current_bus == USB_SE0 ##1
      current_bus == USB_J
  ) else $fatal("!!! %m: USB analyzer detected invalid EOP");

  /*--------------------------------------------------------------------------
   * Full USB Protocol Assertion
   *   seq_error: Corrupt DATA0 followed by NAK
   *   seq_out_timetou: Legitimate timeout on DATA0 during OUT transaction
   *   seq_in_timetou: Legitimate timeout on DATA0 during IN transaction
   *
   *   Sequence repetition operators:
   *     ->#: GOTO repetition; may be false for an arbitrary number of cycles,
   *          then matches on the last instance
   *     *#: CONSECUTIVE repetition; must be true for a specified number of
   *         cycles
   *   Sequence events:
   *     $rose( ): POSEDGE; only match on the first assertion of a signal
   *     $fell( ): NEGEDGE; only match on the first de-assertion of a signal
   *--------------------------------------------------------------------------*/
  sequence seq_error;
    $fell(en_pkt_inbound) [->1] ##[`EOP_BITS-1:`EOP_BITS]
    $rose(done_receiving) && recv_error && debug_pkt.pid == PID_DATA0 ##1
    $fell(en_pkt_inbound) [->1] ##(`EOP_BITS-1)
    $rose(done_receiving) && debug_pkt.pid == PID_NAK;
  endsequence

  sequence seq_out_timeout;
    $fell(en_pkt_inbound) [->1] ##[`EOP_BITS-1:`EOP_BITS]
    $rose(done_receiving) && ~recv_error && debug_pkt.pid == PID_DATA0 ##1
    current_bus == USB_SE0 [*(`TIMEOUT)];
  endsequence

  sequence seq_in_timeout;
    current_bus == USB_SE0 [*(`TIMEOUT-1):(2*`TIMEOUT-1)] ##1
    $fell(en_pkt_inbound) [->1] ##(`EOP_BITS-1)
    $rose(done_receiving) && debug_pkt.pid == PID_NAK;
  endsequence

  chk_protocol: assert property (
    disable iff (~reset_n)

    /*
     * Read/write transaction always starts with an OUT transaction to provide
     * the memory address
     */
    $rose(done_receiving) && ~recv_error && debug_pkt.pid == PID_OUT
                          && debug_pkt.addr == `DEVICE_ADDR
                          && debug_pkt.endp == `ADDR_ENDP |=>
      // OUT ADDR transaction
      (seq_error or seq_out_timeout) [*0:7] ##1
      $fell(en_pkt_inbound) [->1] ##[`EOP_BITS-1:`EOP_BITS]
      $rose(done_receiving) && ~recv_error && debug_pkt.pid == PID_DATA0
                            && debug_pkt.payload[47:0] == '0 ##1
      $fell(en_pkt_inbound) [->1] ##(`EOP_BITS-1)
      $rose(done_receiving) && debug_pkt.pid == PID_ACK ##1

      // OUT or IN DATA transaction
      $fell(en_pkt_inbound) [->1] ##(`EOP_BITS-1)
      $rose(done_receiving) && ~recv_error
                            && debug_pkt.pid inside {PID_IN, PID_OUT}
                            && debug_pkt.endp == `DATA_ENDP ##1
      (seq_error or seq_in_timeout or seq_out_timeout) [*0:7] ##1
      $fell(en_pkt_inbound) [->1] ##[`EOP_BITS-1:`EOP_BITS]
      $rose(done_receiving) && ~recv_error && debug_pkt.pid == PID_DATA0 ##1
      $fell(en_pkt_inbound) [->1] ##(`EOP_BITS-1)
      $rose(done_receiving) && debug_pkt.pid == PID_ACK
  ) else begin
    $error("!!! %m: USB analyzer detected invalid sequence of packets");
  end
endmodule : _USBAnalyzer

program _USBTerminal (
  input logic clock,
  input logic wait_stuffing, en_pkt_inbound, serial_se0, serial_raw,
  input debug_pkt_t debug_pkt,
  input usb_bus_t current_bus);

  default clocking cb_main @(posedge clock); endclocking

  usb_bus_t debug_usb_bus[$];

  integer debug_level = 0;
  initial $value$plusargs("VERBOSE=%d", debug_level);

  initial begin
    string bitstream_str;

    forever begin
      debug_usb_bus = '{};
      bitstream_str = "";

      @(posedge en_pkt_inbound);
      ##1 ;
      $display({"=================================================\n",
                "%m @%0t: USB analyzer is interpreting a new packet"}, $time);

      while (en_pkt_inbound) begin
        debug_usb_bus.push_back(current_bus);

        if (wait_stuffing) begin
          if (serial_raw) bitstream_str = {bitstream_str, "?1"};
          else bitstream_str = {bitstream_str, " "};
        end else begin
          if (~serial_se0 & ~serial_raw) begin
            bitstream_str = {bitstream_str, "0"};
          end else if (~serial_se0 & serial_raw) begin
            bitstream_str = {bitstream_str, "1"};
          end
        end

        ##1 ;
      end

      repeat(`EOP_BITS-1) begin
        debug_usb_bus.push_back(current_bus);
        ##1 ;
      end
      debug_usb_bus.push_back(current_bus);

      if (debug_level > 2) begin
        $display("Raw Bus Traffic: %s", fn_encode_bus(debug_usb_bus));
      end
      if (debug_level > 1) begin
        $display("Bitstream:       %s", bitstream_str);
      end
      if (debug_level == 3) begin
        $display("Packet: %p", debug_pkt);
      end

      unique case (pid_t'(debug_pkt.pid))
        PID_OUT: begin
          $display({"%m @%0t: USB analyzer detected *OUT* with ADDR=%0d ",
                    "ENDP=%0d CRC5=%x (correct %x)"}, $time, debug_pkt.addr,
                    debug_pkt.endp, debug_pkt.crc5, fn_crc5_nr(debug_pkt));
        end

        PID_IN: begin
          $display({"%m @%0t: USB analyzer detected *IN* with ADDR=%0d ",
                    "ENDP=%0d CRC5=%x (correct %x)"}, $time, debug_pkt.addr,
                    debug_pkt.endp, debug_pkt.crc5, fn_crc5_nr(debug_pkt));
        end

        PID_DATA0: begin
          $display({"%m @%0t: USB analyzer detected *DATA0* with PAYLOAD=%x ",
                    "CRC16=%x (correct %x)"}, $time, debug_pkt.payload,
                    debug_pkt.crc16, fn_crc16_nr(debug_pkt));
        end

        PID_ACK: begin
          $display("%m @%0t: USB analyzer detected *ACK*", $time);
        end

        PID_NAK: begin
          $display("%m @%0t: USB analyzer detected *NAK*", $time);
        end

        default: begin
          $display("%m @%0t: USBAnalyzer could not interpret packet", $time);
        end
      endcase

      $display("=================================================\n\n");
      ##1 ;
    end
  end
endprogram : _USBTerminal
